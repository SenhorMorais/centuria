<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Centúria - Plataforma de Investimentos</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Biblioteca para geração de QR Code PIX -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>
    <style>
        :root {
            --primary-color: #00d4ff;
            --secondary-color: #7c3aed;
            --accent-color: #ff006e;
            --bg-dark: #0a0a0f;
            --bg-card: rgba(15, 15, 25, 0.8);
            --glass-bg: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
            --text-primary: #ffffff;
            --text-secondary: #a1a1aa;
            --success: #10b981;
            --error: #ef4444;
            --warning: #f59e0b;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Rajdhani', sans-serif;
            background: var(--bg-dark);
            background-image: 
                radial-gradient(circle at 20% 80%, rgba(0, 212, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(124, 58, 237, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(255, 0, 110, 0.05) 0%, transparent 50%);
            min-height: 100vh;
            color: var(--text-primary);
            overflow-x: hidden;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, transparent 49%, rgba(0, 212, 255, 0.03) 50%, transparent 51%),
                        linear-gradient(-45deg, transparent 49%, rgba(124, 58, 237, 0.03) 50%, transparent 51%);
            background-size: 30px 30px;
            pointer-events: none;
            z-index: -1;
            animation: gridMove 20s linear infinite;
        }

        @keyframes gridMove {
            0% { transform: translate(0, 0); }
            100% { transform: translate(30px, 30px); }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        .auth-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            position: relative;
        }

        .auth-box {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            padding: 40px;
            box-shadow: 
                0 20px 40px rgba(0, 0, 0, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            width: 100%;
            max-width: 420px;
            position: relative;
            overflow: hidden;
            animation: fadeInUp 0.8s ease-out;
        }

        .auth-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--primary-color), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .logo {
            text-align: center;
            margin-bottom: 40px;
            position: relative;
        }

        .logo h1 {
            font-family: 'Orbitron', monospace;
            color: var(--primary-color);
            font-size: 2.8rem;
            font-weight: 900;
            margin-bottom: 10px;
            text-shadow: 0 0 30px rgba(0, 212, 255, 0.5);
            letter-spacing: 2px;
            animation: glow 2s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from { text-shadow: 0 0 20px rgba(0, 212, 255, 0.3); }
            to { text-shadow: 0 0 30px rgba(0, 212, 255, 0.7), 0 0 40px rgba(0, 212, 255, 0.3); }
        }

        .logo p {
            color: var(--text-secondary);
            font-size: 1.1rem;
            font-weight: 300;
            opacity: 0;
            animation: fadeIn 1s ease-out 0.5s forwards;
        }

        @keyframes fadeIn {
            to { opacity: 1; }
        }

        .form-group {
            margin-bottom: 24px;
            position: relative;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 16px 20px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            font-size: 16px;
            font-family: 'Rajdhani', sans-serif;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            background: rgba(255, 255, 255, 0.05);
            color: var(--text-primary);
            backdrop-filter: blur(10px);
            position: relative;
        }

        .form-group input::placeholder {
            color: var(--text-secondary);
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 
                0 0 0 4px rgba(0, 212, 255, 0.1),
                0 0 20px rgba(0, 212, 255, 0.3);
            transform: translateY(-2px);
        }

        .form-group input[type="color"] {
            width: 80px;
            height: 50px;
            padding: 4px;
            cursor: pointer;
        }

        .password-toggle {
            position: absolute;
            right: 16px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            cursor: pointer;
            color: var(--text-secondary);
            font-size: 18px;
            padding: 8px;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .password-toggle:hover {
            background: rgba(0, 212, 255, 0.1);
            color: var(--primary-color);
            transform: translateY(-50%) scale(1.1);
        }

        .btn {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            border-radius: 16px;
            font-size: 16px;
            font-weight: 700;
            font-family: 'Rajdhani', sans-serif;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            margin-bottom: 16px;
            position: relative;
            overflow: hidden;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 8px 25px rgba(0, 212, 255, 0.3);
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 
                0 15px 35px rgba(0, 212, 255, 0.4),
                0 0 30px rgba(0, 212, 255, 0.3);
        }

        .btn:active {
            transform: translateY(-1px);
        }

        .btn-secondary {
            background: transparent;
            color: var(--primary-color);
            border: 2px solid var(--primary-color);
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.2);
        }

        .btn-secondary:hover {
            background: var(--primary-color);
            color: var(--bg-dark);
            box-shadow: 0 0 30px rgba(0, 212, 255, 0.5);
        }

        .dashboard {
            display: none;
            background: transparent;
            min-height: 100vh;
            animation: fadeInUp 0.6s ease-out;
        }

        .header {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            padding: 24px 0;
            margin-bottom: 30px;
            border-radius: 0 0 24px 24px;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color), var(--accent-color));
            animation: gradientShift 3s ease-in-out infinite;
        }

        @keyframes gradientShift {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 1; }
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .header h2 {
            font-family: 'Orbitron', monospace;
            color: var(--primary-color);
            font-size: 2rem;
            font-weight: 700;
            text-shadow: 0 0 20px rgba(0, 212, 255, 0.5);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 16px;
            font-weight: 600;
        }

        .balance-card {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 40px;
            border-radius: 24px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
            box-shadow: 
                0 20px 40px rgba(0, 212, 255, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
            animation: slideInLeft 0.8s ease-out;
        }

        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .balance-card::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: conic-gradient(from 0deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            animation: rotate 4s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .balance-card-content {
            position: relative;
            z-index: 2;
        }

        .balance-card h3 {
            font-size: 1.3rem;
            margin-bottom: 12px;
            opacity: 0.9;
            font-weight: 300;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .balance-amount {
            font-family: 'Orbitron', monospace;
            font-size: 3.5rem;
            font-weight: 900;
            margin-bottom: 24px;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
            animation: countUp 1s ease-out;
        }

        @keyframes countUp {
            from { opacity: 0; transform: scale(0.5); }
            to { opacity: 1; transform: scale(1); }
        }

        .balance-actions {
            display: flex;
            gap: 16px;
        }

        .balance-actions button {
            flex: 1;
            padding: 16px;
            background: rgba(255, 255, 255, 0.15);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            font-weight: 600;
            font-family: 'Rajdhani', sans-serif;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .balance-actions button:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }

        .balance-actions button[style*="background: linear-gradient"]:hover {
            background: linear-gradient(135deg, #ff006e, #7c3aed) !important;
            box-shadow: 0 8px 25px rgba(255, 0, 110, 0.4) !important;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }

        .card {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            padding: 32px;
            border-radius: 20px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            animation: slideInUp 0.6s ease-out;
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }

        .card:hover::before {
            transform: scaleX(1);
        }

        .card:hover {
            transform: translateY(-8px);
            box-shadow: 
                0 25px 50px rgba(0, 0, 0, 0.3),
                0 0 30px rgba(0, 212, 255, 0.2);
            border-color: rgba(0, 212, 255, 0.3);
        }

        .card h3 {
            color: var(--text-primary);
            margin-bottom: 24px;
            font-size: 1.5rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .investment-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            margin-bottom: 16px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .investment-item::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 4px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            transform: scaleY(0);
            transition: transform 0.3s ease;
        }

        .investment-item:hover::before {
            transform: scaleY(1);
        }

        .investment-item:hover {
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(0, 212, 255, 0.3);
            transform: translateX(8px);
        }

        .investment-info h4 {
            color: var(--text-primary);
            margin-bottom: 6px;
            font-weight: 600;
        }

        .investment-info p {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .investment-return .rate {
            color: var(--success);
            font-weight: 700;
            font-size: 1.2rem;
            text-shadow: 0 0 10px rgba(16, 185, 129, 0.3);
        }

        .btn-invest {
            position: relative;
            overflow: hidden;
        }

        .btn-invest::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .btn-invest:hover::before {
            left: 100%;
        }

        .btn-invest:hover {
            transform: translateY(-2px);
            box-shadow: 
                0 8px 20px rgba(0, 212, 255, 0.4),
                0 0 20px rgba(124, 58, 237, 0.3);
        }

        .btn-invest:active {
            transform: translateY(0);
        }

        .btn-invest-standard {
            margin-top: 8px;
            padding: 10px 20px;
            width: 100px;
            height: 38px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 0.8rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-family: 'Rajdhani', sans-serif;
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
            white-space: nowrap;
        }

        .btn-invest-standard::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .btn-invest-standard:hover::before {
            left: 100%;
        }

        .btn-invest-standard:hover {
            transform: translateY(-2px);
            box-shadow: 
                0 8px 20px rgba(0, 212, 255, 0.4),
                0 0 20px rgba(124, 58, 237, 0.3);
        }

        .btn-invest-standard:active {
            transform: translateY(0);
        }

        .btn-invest-standard:focus {
            outline: none;
            box-shadow: 
                0 0 0 3px rgba(0, 212, 255, 0.3),
                0 8px 20px rgba(0, 212, 255, 0.4);
        }

        #investmentInfo {
            transition: all 0.3s ease;
        }

        #investmentInfo h4 {
            font-family: 'Orbitron', monospace;
            text-shadow: 0 0 10px rgba(0, 212, 255, 0.3);
        }

        #investmentCards {
            display: flex !important;
            flex-direction: column !important;
            gap: 12px !important;
            margin-bottom: 20px !important;
            min-height: 50px;
        }

        #investmentCardsSelection {
            display: block !important;
        }

        .investment-card-option {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            animation: slideInUp 0.4s ease-out both;
            display: block !important;
            width: 100%;
        }

        .investment-card-option:hover {
            border-color: var(--primary-color);
            background: rgba(0, 212, 255, 0.1);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 212, 255, 0.3);
        }

        .investment-card-option.selected {
            border-color: var(--primary-color);
            background: rgba(0, 212, 255, 0.15);
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.4);
        }

        .investment-card-option::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }

        .investment-card-option.selected::before,
        .investment-card-option:hover::before {
            transform: scaleX(1);
        }

        .investment-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .investment-card-name {
            font-weight: 700;
            color: var(--text-primary);
            font-size: 1.1rem;
        }

        .investment-card-rate {
            color: var(--success);
            font-weight: 700;
            font-size: 1.1rem;
            text-shadow: 0 0 10px rgba(16, 185, 129, 0.3);
        }

        .investment-card-desc {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .transaction-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }

        .transaction-item:last-child {
            border-bottom: none;
        }

        .transaction-item:hover {
            padding-left: 16px;
            background: rgba(255, 255, 255, 0.03);
            margin: 0 -16px;
            border-radius: 12px;
        }

        .transaction-info h4 {
            color: var(--text-primary);
            margin-bottom: 4px;
            font-weight: 600;
        }

        .transaction-info p {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .transaction-amount {
            font-weight: 700;
            font-family: 'Orbitron', monospace;
        }

        .transaction-amount.positive {
            color: var(--success);
            text-shadow: 0 0 10px rgba(16, 185, 129, 0.3);
        }

        .transaction-amount.negative {
            color: var(--error);
            text-shadow: 0 0 10px rgba(239, 68, 68, 0.3);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(8px);
            z-index: 1000;
            animation: fadeIn 0.3s ease-out;
        }

        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            padding: 40px;
            border-radius: 24px;
            width: 90%;
            max-width: 500px;
            max-height: 80vh;
            overflow-y: auto;
            animation: modalSlideIn 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
        }

        .modal h3 {
            margin-bottom: 24px;
            color: var(--text-primary);
            font-family: 'Orbitron', monospace;
            font-size: 1.8rem;
            text-align: center;
        }

        .close-modal {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            font-size: 28px;
            cursor: pointer;
            color: var(--text-secondary);
            transition: all 0.3s ease;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .close-modal:hover {
            color: var(--error);
            background: rgba(239, 68, 68, 0.1);
            transform: rotate(90deg);
        }

        .nav-tabs {
            display: flex;
            gap: 4px;
            margin-bottom: 30px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 4px;
        }

        .nav-tab {
            flex: 1;
            padding: 16px 24px;
            background: transparent;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 600;
            color: var(--text-secondary);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-family: 'Rajdhani', sans-serif;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .nav-tab.active {
            color: var(--text-primary);
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            box-shadow: 0 8px 25px rgba(0, 212, 255, 0.3);
        }

        .nav-tab:hover:not(.active) {
            color: var(--primary-color);
            background: rgba(0, 212, 255, 0.1);
        }

        .tab-content {
            display: none;
            animation: fadeInUp 0.4s ease-out;
        }

        .tab-content.active {
            display: block;
        }

        .admin-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 24px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            padding: 32px 20px;
            border-radius: 20px;
            text-align: center;
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
            min-height: 140px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color), var(--accent-color));
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .stat-card h4 {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-bottom: 16px;
            text-transform: uppercase;
            letter-spacing: 2px;
            font-weight: 500;
            line-height: 1.2;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .stat-card .value {
            color: var(--text-primary);
            font-size: 2.4rem;
            font-weight: 900;
            font-family: 'Orbitron', monospace;
            text-shadow: 0 0 20px rgba(0, 212, 255, 0.3);
            word-break: break-all;
            line-height: 1.1;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .stat-card .value.large-number {
            font-size: 2rem;
        }

        .stat-card .value.extra-large-number {
            font-size: 1.6rem;
        }

        .stat-card .value.huge-number {
            font-size: 1.4rem;
        }

        .user-table {
            width: 100%;
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            overflow: hidden;
        }

        .user-table th,
        .user-table td {
            padding: 20px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .user-table th {
            background: rgba(255, 255, 255, 0.05);
            font-weight: 700;
            color: var(--text-primary);
            text-transform: uppercase;
            letter-spacing: 1px;
            font-size: 0.9rem;
        }

        .user-table tr:hover {
            background: rgba(255, 255, 255, 0.03);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.8rem;
            border-radius: 10px;
            margin: 0 4px;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn-small:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }

        .hidden {
            display: none !important;
        }

        .loading {
            position: relative;
            pointer-events: none;
        }

        .loading::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 20px;
            height: 20px;
            margin: -10px 0 0 -10px;
            border: 2px solid transparent;
            border-top: 2px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .pulse {
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .shake {
            animation: shake 0.5s ease-in-out;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        /* Scrollbar personalizada */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--secondary-color);
        }

        /* Estilos PIX */
        .loading-spinner {
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255, 193, 7, 0.3);
            border-top: 2px solid var(--warning);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        .payment-success {
            background: rgba(16, 185, 129, 0.1) !important;
            border-color: rgba(16, 185, 129, 0.3) !important;
        }

        .payment-success .status-text {
            color: var(--success) !important;
        }

        .payment-expired {
            background: rgba(239, 68, 68, 0.1) !important;
            border-color: rgba(239, 68, 68, 0.3) !important;
        }

        .payment-expired .status-text {
            color: var(--error) !important;
        }

        .pix-timer {
            font-family: 'Orbitron', monospace;
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--warning);
        }

        /* Responsividade */
        @media (max-width: 768px) {
            .grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .balance-actions {
                flex-direction: column;
                gap: 12px;
            }
            
            .header-content {
                flex-direction: column;
                gap: 16px;
                text-align: center;
            }
            
            .user-info {
                flex-direction: column;
                gap: 12px;
            }

            .admin-stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 16px;
            }

            .stat-card {
                padding: 24px 16px;
                min-height: 120px;
            }

            .stat-card .value {
                font-size: 1.8rem;
                min-height: 50px;
            }

            .stat-card .value.large-number {
                font-size: 1.5rem;
            }

            .stat-card .value.extra-large-number {
                font-size: 1.3rem;
            }

            .stat-card .value.huge-number {
                font-size: 1.1rem;
            }

            .stat-card h4 {
                font-size: 0.8rem;
                height: 35px;
                margin-bottom: 12px;
            }

            .nav-tabs {
                flex-direction: column;
                gap: 8px;
            }

            .balance-amount {
                font-size: 2.5rem;
            }

            .logo h1 {
                font-size: 2.2rem;
            }

            .auth-box {
                margin: 20px;
                padding: 30px;
            }
        }

        @media (max-width: 480px) {
            .admin-stats {
                grid-template-columns: 1fr;
                gap: 12px;
            }

            .stat-card {
                padding: 20px 12px;
                min-height: 100px;
            }

            .stat-card .value {
                font-size: 1.6rem;
                min-height: 45px;
            }

            .stat-card .value.large-number {
                font-size: 1.3rem;
            }

            .stat-card .value.extra-large-number {
                font-size: 1.1rem;
            }

            .stat-card .value.huge-number {
                font-size: 1rem;
            }

            .stat-card h4 {
                font-size: 0.75rem;
                height: 30px;
                margin-bottom: 10px;
                letter-spacing: 1px;
            }

            .user-table {
                font-size: 0.8rem;
            }

            .user-table th,
            .user-table td {
                padding: 12px 8px;
            }
            
            /* Esconder coluna da chave PIX em telas muito pequenas */
            .user-table th:nth-child(4),
            .user-table td:nth-child(4) {
                display: none;
            }
        }
    </style>
</head>
<body>
    <!-- Tela de Login/Cadastro -->
    <div id="authScreen" class="auth-container">
        <div class="auth-box">
            <div class="logo">
                <h1>Centúria</h1>
                <p>Sua plataforma de investimentos inteligente</p>
            </div>
            
            <!-- Login Form -->
            <div id="loginForm">
                <div class="form-group">
                    <label for="loginEmail">E-mail</label>
                    <input type="email" id="loginEmail" placeholder="seu@email.com">
                </div>
                <div class="form-group">
                    <label for="loginPassword">Senha</label>
                    <div style="position: relative;">
                        <input type="password" id="loginPassword" placeholder="Sua senha">
                        <button type="button" class="password-toggle" onclick="togglePassword('loginPassword')">👁️</button>
                    </div>
                </div>
                <button class="btn" onclick="login()">Entrar</button>
                <button class="btn btn-secondary" onclick="showRegister()">Criar Conta</button>
            </div>
            
            <!-- Register Form -->
            <div id="registerForm" class="hidden">
                <div class="form-group">
                    <label for="registerName">Nome Completo</label>
                    <input type="text" id="registerName" placeholder="Seu nome completo">
                </div>
                <div class="form-group">
                    <label for="registerEmail">E-mail</label>
                    <input type="email" id="registerEmail" placeholder="seu@email.com">
                </div>
                <div class="form-group">
                    <label for="registerPassword">Senha (mínimo 6 caracteres)</label>
                    <div style="position: relative;">
                        <input type="password" id="registerPassword" placeholder="Sua senha" minlength="6" oninput="validatePassword()">
                        <button type="button" class="password-toggle" onclick="togglePassword('registerPassword')">👁️</button>
                    </div>
                    <div id="passwordStrength" style="margin-top: 8px; font-size: 0.8rem; color: var(--text-secondary);"></div>
                </div>
                <div class="form-group">
                    <label for="confirmPassword">Confirmar Senha</label>
                    <div style="position: relative;">
                        <input type="password" id="confirmPassword" placeholder="Confirme sua senha" minlength="6" oninput="validatePasswordMatch()">
                        <button type="button" class="password-toggle" onclick="togglePassword('confirmPassword')">👁️</button>
                    </div>
                    <div id="passwordMatch" style="margin-top: 8px; font-size: 0.8rem; color: var(--text-secondary);"></div>
                </div>
                <div class="form-group">
                    <label for="registerCPF">CPF</label>
                    <input type="text" id="registerCPF" placeholder="000.000.000-00">
                </div>
                <button class="btn" onclick="register()">Criar Conta</button>
                <button class="btn btn-secondary" onclick="showLogin()">Já tenho conta</button>
            </div>
        </div>
    </div>

    <!-- Dashboard Principal -->
    <div id="userDashboard" class="dashboard">
        <div class="header">
            <div class="header-content">
                <h2>Bem-vindo</h2>
                <div class="user-info">
                    <span id="userName">Usuário</span>
                    <button class="btn-small" onclick="logout()">Sair</button>
                </div>
            </div>
        </div>
        
        <div class="container">
            <!-- Cartão de Saldo -->
            <div class="balance-card">
                <div class="balance-card-content">
                    <h3>Saldo Total</h3>
                    <div class="balance-amount" id="totalBalance">R$ 0,00</div>
                    <div class="balance-actions">
                        <button onclick="openModal('depositModal')">💰 Depositar</button>
                        <button onclick="openModal('withdrawModal')">💸 Sacar</button>
                        <button onclick="checkInvestmentsAndOpen()" style="background: linear-gradient(135deg, #ff006e, #7c3aed); border: 1px solid rgba(255, 0, 110, 0.3);">📈 Investir</button>
                    </div>
                </div>
            </div>

            <div class="grid">
                <!-- Investimentos Disponíveis -->
                <div class="card">
                    <h3>🚀 Investimentos Disponíveis</h3>
                    <div id="availableInvestments"></div>
                </div>

                <!-- Meus Investimentos -->
                <div class="card">
                    <h3>💼 Meus Investimentos</h3>
                    <div id="userInvestments"></div>
                </div>

                <!-- Transações Recentes -->
                <div class="card">
                    <h3>📊 Transações Recentes</h3>
                    <div id="recentTransactions"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Painel Administrativo -->
    <div id="adminDashboard" class="dashboard">
        <div class="header">
            <div class="header-content">
                <h2>Painel Administrativo</h2>
                <div class="user-info">
                    <span style="font-size: 0.8rem; color: var(--success); margin-right: 12px;">
                        💾 Dados: Online
                    </span>
                    <button class="btn-small" onclick="forceUpdateAdmin()" style="background: var(--success);">🔄 Atualizar</button>
                    <span id="adminName">Administrador</span>
                    <button class="btn-small" onclick="switchToUser()">Dashboard Usuário</button>
                    <button class="btn-small" onclick="logout()">Sair</button>
                </div>
            </div>
        </div>
        
        <div class="container">
            <!-- Estatísticas Gerais -->
            <div class="admin-stats">
                <div class="stat-card">
                    <h4>Total de Usuários</h4>
                    <div class="value" id="totalUsers">0</div>
                </div>
                <div class="stat-card">
                    <h4>Total Investido</h4>
                    <div class="value" id="totalInvested">R$ 0</div>
                </div>
                <div class="stat-card">
                    <h4>Total Depositado</h4>
                    <div class="value" id="totalDeposited">R$ 0</div>
                </div>
                <div class="stat-card">
                    <h4>Investimentos Ativos</h4>
                    <div class="value" id="activeInvestments">0</div>
                </div>
            </div>

            <!-- Abas de Administração -->
            <div class="nav-tabs">
                <button class="nav-tab active" onclick="showTab('usersTab')">👥 Usuários</button>
                <button class="nav-tab" onclick="showTab('investmentsTab')">📈 Investimentos</button>
                <button class="nav-tab" onclick="showTab('transactionsTab')">💳 Transações</button>
                <button class="nav-tab" onclick="showTab('settingsTab')">⚙️ Configurações</button>
            </div>

            <!-- Aba de Usuários -->
            <div id="usersTab" class="tab-content active">
                <div class="card">
                    <h3>Gerenciar Usuários</h3>
                    <table class="user-table">
                        <thead>
                            <tr>
                                <th>Nome</th>
                                <th>Email</th>
                                <th>CPF</th>
                                <th>Chave PIX</th>
                                <th>Saldo</th>
                                <th>Total Investido</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody id="usersTableBody"></tbody>
                    </table>
                </div>
            </div>

            <!-- Aba de Investimentos -->
            <div id="investmentsTab" class="tab-content">
                <div class="card">
                    <h3>Gerenciar Investimentos</h3>
                    <button class="btn" onclick="openModal('addInvestmentModal')" style="margin-bottom: 20px;">➕ Adicionar Investimento</button>
                    <div id="investmentsList"></div>
                </div>
            </div>

            <!-- Aba de Transações -->
            <div id="transactionsTab" class="tab-content">
                <div class="card">
                    <h3>Todas as Transações</h3>
                    <div id="allTransactions"></div>
                </div>
            </div>

            <!-- Aba de Configurações -->
            <div id="settingsTab" class="tab-content">
                <div class="grid">
                    <div class="card">
                        <h3>🎨 Configurações da Plataforma</h3>
                        <div class="form-group">
                            <label for="platformName">Nome da Plataforma</label>
                            <input type="text" id="platformName" value="Centúria">
                        </div>
                        <div class="form-group">
                            <label for="platformSubtitle">Subtítulo</label>
                            <input type="text" id="platformSubtitle" value="Sua plataforma de investimentos inteligente">
                        </div>
                        <div class="form-group">
                            <label for="primaryColor">Cor Primária</label>
                            <input type="color" id="primaryColor" value="#00d4ff">
                        </div>
                        <div class="form-group">
                            <label for="secondaryColor">Cor Secundária</label>
                            <input type="color" id="secondaryColor" value="#7c3aed">
                        </div>
                        <button class="btn" onclick="updatePlatformSettings()">💾 Salvar Configurações</button>
                    </div>
                    
                    <div class="card">
                        <h3>⚙️ Configurações de Sistema</h3>
                        <div class="form-group">
                            <label for="minimumDeposit">Depósito Mínimo (R$)</label>
                            <input type="number" id="minimumDeposit" value="10" min="1" step="0.01">
                        </div>
                        <div class="form-group">
                            <label for="withdrawalFee">Taxa de Saque (%)</label>
                            <input type="number" id="withdrawalFee" value="0" min="0" max="100" step="0.01">
                        </div>
                        <div class="form-group">
                            <label for="maintenanceMode">Modo Manutenção</label>
                            <select id="maintenanceMode">
                                <option value="false">Desativado</option>
                                <option value="true">Ativado</option>
                            </select>
                        </div>
                        <button class="btn" onclick="updateSystemSettings()">💾 Salvar Sistema</button>
                        
                        <hr style="margin: 30px 0; border: 1px solid rgba(255,255,255,0.1);">
                        
                        <div style="text-align: center;">
                            <h4 style="color: var(--warning); margin-bottom: 16px;">🗃️ Gerenciamento de Dados</h4>
                            <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 20px;">
                                Os dados são salvos automaticamente no navegador. Use as opções abaixo com cuidado.
                            </p>
                            <div style="display: flex; gap: 12px; justify-content: center;">
                                <button onclick="exportData()" style="
                                    padding: 12px 20px;
                                    background: var(--success);
                                    color: white;
                                    border: none;
                                    border-radius: 12px;
                                    font-weight: 600;
                                    cursor: pointer;
                                    font-size: 0.9rem;
                                ">📤 Exportar Dados</button>
                                <button onclick="resetAllData()" style="
                                    padding: 12px 20px;
                                    background: var(--error);
                                    color: white;
                                    border: none;
                                    border-radius: 12px;
                                    font-weight: 600;
                                    cursor: pointer;
                                    font-size: 0.9rem;
                                ">🗑️ Limpar Tudo</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modais -->
    <!-- Modal de Depósito -->
    <div id="depositModal" class="modal">
        <div class="modal-content">
            <button class="close-modal" onclick="closeModal('depositModal')">&times;</button>
            <h3>💰 Fazer Depósito PIX</h3>
            
            <!-- Formulário inicial -->
            <div id="depositForm">
                <div class="form-group">
                    <label for="depositAmount">Valor do Depósito</label>
                    <input type="number" id="depositAmount" placeholder="0,00" min="1" step="0.01">
                    <small id="depositMinAmount" style="color: var(--text-secondary); font-size: 0.8rem;"></small>
                </div>
                <div style="
                    background: rgba(0, 212, 255, 0.1);
                    border: 1px solid rgba(0, 212, 255, 0.3);
                    border-radius: 12px;
                    padding: 16px;
                    margin-bottom: 20px;
                    text-align: center;
                ">
                    <div style="color: var(--primary-color); font-weight: 600; margin-bottom: 8px;">
                        🚀 Pagamento Instantâneo via PIX
                    </div>
                    <div style="color: var(--text-secondary); font-size: 0.9rem;">
                        Seu depósito será creditado automaticamente após confirmação
                    </div>
                </div>
                <button class="btn" onclick="processDeposit()">Gerar Cobrança PIX</button>
            </div>

            <!-- Tela de pagamento PIX -->
            <div id="pixPayment" style="display: none;">
                <div style="text-align: center; margin-bottom: 20px;">
                    <h4 style="color: var(--primary-color); margin-bottom: 16px;">
                        💰 Pagamento PIX - <span id="pixAmount"></span>
                    </h4>
                    <p style="color: var(--text-secondary); margin-bottom: 20px;">
                        Escaneie o QR Code ou copie o código PIX
                    </p>
                </div>

                <!-- QR Code -->
                <div style="
                    background: white;
                    padding: 20px;
                    border-radius: 16px;
                    margin-bottom: 20px;
                    display: flex;
                    justify-content: center;
                    align-items: center;
                ">
                    <div id="qrcode" style="display: flex; justify-content: center;"></div>
                </div>

                <!-- Código PIX -->
                <div class="form-group">
                    <label>Código PIX (Copiar e Colar)</label>
                    <div style="position: relative;">
                        <textarea id="pixCode" readonly style="
                            width: 100%;
                            height: 80px;
                            padding: 12px;
                            border: 2px solid rgba(255, 255, 255, 0.1);
                            border-radius: 12px;
                            background: rgba(255, 255, 255, 0.05);
                            color: var(--text-primary);
                            font-family: monospace;
                            font-size: 0.8rem;
                            resize: none;
                            word-break: break-all;
                        "></textarea>
                        <button onclick="copyPixCode()" style="
                            position: absolute;
                            top: 8px;
                            right: 8px;
                            background: var(--primary-color);
                            color: white;
                            border: none;
                            padding: 6px 12px;
                            border-radius: 8px;
                            font-size: 0.8rem;
                            cursor: pointer;
                        ">📋 Copiar</button>
                    </div>
                </div>

                <!-- Status do pagamento -->
                <div id="paymentStatus" style="
                    background: rgba(255, 193, 7, 0.1);
                    border: 2px solid rgba(255, 193, 7, 0.3);
                    border-radius: 12px;
                    padding: 16px;
                    text-align: center;
                    margin-bottom: 20px;
                ">
                    <div style="color: var(--warning); font-weight: 600; margin-bottom: 8px;">
                        ⏳ Aguardando Pagamento...
                    </div>
                    <div style="color: var(--text-secondary); font-size: 0.9rem;">
                        Verificando pagamento automaticamente
                    </div>
                    <div style="margin-top: 12px;">
                        <div class="loading-spinner"></div>
                    </div>
                </div>

                <!-- Botões -->
                <div style="display: flex; gap: 12px;">
                    <button class="btn btn-secondary" onclick="cancelPixPayment()" style="flex: 1;">
                        ❌ Cancelar
                    </button>
                    <button class="btn" onclick="checkPaymentStatus()" style="flex: 1;">
                        🔄 Verificar Pagamento
                    </button>
                </div>
                
                <!-- Botão de simulação (apenas para testes) -->
                <div style="margin-top: 16px; padding-top: 16px; border-top: 1px solid rgba(255,255,255,0.1);">
                    <button onclick="simulatePixPayment()" style="
                        width: 100%;
                        padding: 12px;
                        background: rgba(16, 185, 129, 0.2);
                        border: 2px solid rgba(16, 185, 129, 0.3);
                        color: var(--success);
                        border-radius: 12px;
                        font-weight: 600;
                        cursor: pointer;
                        font-size: 0.9rem;
                    ">
                        🧪 SIMULAR PAGAMENTO (Teste)
                    </button>
                    <small style="display: block; text-align: center; color: var(--text-secondary); font-size: 0.8rem; margin-top: 8px;">
                        Botão apenas para demonstração
                    </small>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Saque -->
    <div id="withdrawModal" class="modal">
        <div class="modal-content">
            <button class="close-modal" onclick="closeModal('withdrawModal')">&times;</button>
            <h3>💸 Fazer Saque PIX</h3>
            <div class="form-group">
                <label for="withdrawAmount">Valor do Saque</label>
                <input type="number" id="withdrawAmount" placeholder="0,00" min="1" step="0.01">
            </div>
            
            <!-- Campo da Chave PIX -->
            <div class="form-group">
                <label for="withdrawPixKey">Chave PIX</label>
                <select id="pixKeyType" onchange="updatePixKeyPlaceholder()" style="margin-bottom: 8px;">
                    <option value="cpf">CPF</option>
                    <option value="email">E-mail</option>
                    <option value="phone">Telefone</option>
                    <option value="random">Chave Aleatória</option>
                </select>
                <input type="text" id="withdrawPixKey" placeholder="000.000.000-00">
                <small style="color: var(--text-secondary); font-size: 0.8rem; display: block; margin-top: 4px;">
                    🔑 Informe sua chave PIX para receber o valor instantaneamente
                </small>
            </div>
            
            <div style="
                background: rgba(0, 212, 255, 0.1);
                border: 1px solid rgba(0, 212, 255, 0.3);
                border-radius: 12px;
                padding: 16px;
                margin-bottom: 20px;
                text-align: center;
            ">
                <div style="color: var(--primary-color); font-weight: 600; margin-bottom: 8px;">
                    ⚡ Saque Instantâneo via PIX
                </div>
                <div style="color: var(--text-secondary); font-size: 0.9rem;">
                    Processamento imediato, dinheiro na sua conta em até 2 minutos
                </div>
            </div>
            
            <button class="btn" onclick="processWithdraw()">Confirmar Saque PIX</button>
        </div>
    </div>

    <!-- Modal de Investimento -->
    <div id="investModal" class="modal">
        <div class="modal-content">
            <button class="close-modal" onclick="closeModal('investModal')">&times;</button>
            <h3>📈 Fazer Investimento</h3>
            
            <!-- Seleção de investimentos em cards (para modal geral) -->
            <div id="investmentCardsSelection">
                <label style="display: block; margin-bottom: 20px; font-weight: 600; color: var(--text-primary); font-size: 0.9rem; text-transform: uppercase; letter-spacing: 1px;">Escolha seu Investimento</label>
                <div id="investmentCards" style="display: flex; flex-direction: column; gap: 12px; margin-bottom: 20px;">
                    <!-- Os cards serão inseridos aqui via JavaScript -->
                </div>
            </div>
            
            <!-- Informações do investimento específico -->
            <div id="investmentInfo" class="form-group" style="display: none;">
                <div style="
                    background: rgba(0, 212, 255, 0.1);
                    border: 1px solid rgba(0, 212, 255, 0.3);
                    border-radius: 12px;
                    padding: 20px;
                    margin-bottom: 20px;
                ">
                    <h4 id="selectedInvestmentName" style="color: var(--primary-color); margin-bottom: 8px;"></h4>
                    <p style="color: var(--text-secondary); margin-bottom: 8px;"><span id="selectedInvestmentDesc"></span></p>
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <span style="color: var(--success); font-weight: 700; font-size: 1.1rem;">Taxa: <span id="selectedInvestmentRate"></span></span>
                        <span style="color: var(--text-secondary);">Mínimo: <span id="selectedInvestmentMin"></span></span>
                    </div>
                </div>
                <input type="hidden" id="selectedInvestmentId">
            </div>
            
            <div class="form-group">
                <label for="investAmount">Valor do Investimento</label>
                <input type="number" id="investAmount" placeholder="0,00" min="1" step="0.01">
            </div>
            <button class="btn" onclick="processInvestment()">Confirmar Investimento</button>
        </div>
    </div>

    <!-- Modal Adicionar Investimento (Admin) -->
    <div id="addInvestmentModal" class="modal">
        <div class="modal-content">
            <button class="close-modal" onclick="closeModal('addInvestmentModal')">&times;</button>
            <h3>➕ Adicionar Novo Investimento</h3>
            <div class="form-group">
                <label for="newInvestmentName">Nome do Investimento</label>
                <input type="text" id="newInvestmentName" placeholder="Nome do investimento">
            </div>
            <div class="form-group">
                <label for="newInvestmentRate">Taxa de Retorno (%)</label>
                <input type="number" id="newInvestmentRate" placeholder="0,00" step="0.01">
            </div>
            <div class="form-group">
                <label for="newInvestmentDescription">Descrição</label>
                <input type="text" id="newInvestmentDescription" placeholder="Descrição do investimento">
            </div>
            <div class="form-group">
                <label for="newInvestmentMinAmount">Valor Mínimo</label>
                <input type="number" id="newInvestmentMinAmount" placeholder="0,00" min="1" step="0.01">
            </div>
            <button class="btn" onclick="addNewInvestment()">Adicionar Investimento</button>
        </div>
    </div>

    <!-- Modal Editar Usuário (Admin) -->
    <div id="editUserModal" class="modal">
        <div class="modal-content">
            <button class="close-modal" onclick="closeModal('editUserModal')">&times;</button>
            <h3>✏️ Editar Usuário</h3>
            <input type="hidden" id="editUserId">
            <div class="form-group">
                <label for="editUserName">Nome Completo</label>
                <input type="text" id="editUserName" placeholder="Nome completo">
            </div>
            <div class="form-group">
                <label for="editUserEmail">E-mail</label>
                <input type="email" id="editUserEmail" placeholder="email@exemplo.com">
            </div>
            <div class="form-group">
                <label for="editUserCPF">CPF</label>
                <input type="text" id="editUserCPF" placeholder="000.000.000-00">
            </div>
            <div class="form-group">
                <label for="editUserPixKey">Chave PIX (opcional)</label>
                <input type="text" id="editUserPixKey" placeholder="Chave PIX do usuário">
                <small style="color: var(--text-secondary); font-size: 0.8rem;">
                    Chave PIX salva para saques futuros
                </small>
            </div>
            <div class="form-group">
                <label for="editUserBalance">Saldo (R$)</label>
                <input type="number" id="editUserBalance" placeholder="0,00" step="0.01">
            </div>
            <div class="form-group">
                <label for="editUserPassword">Nova Senha (deixe em branco para manter atual)</label>
                <div style="position: relative;">
                    <input type="password" id="editUserPassword" placeholder="Nova senha (opcional)">
                    <button type="button" class="password-toggle" onclick="togglePassword('editUserPassword')">👁️</button>
                </div>
            </div>
            <button class="btn" onclick="saveUserEdit()">Salvar Alterações</button>
        </div>
    </div>

    <script>
        // ====================================
        // SISTEMA DE PERSISTÊNCIA DE DADOS
        // ====================================
        
        /**
         * Salva dados no localStorage
         */
        function saveData() {
            try {
                const data = {
                    users: users,
                    investments: investments,
                    userInvestments: userInvestments,
                    transactions: transactions,
                    platformSettings: platformSettings,
                    lastUpdate: Date.now()
                };
                localStorage.setItem('centuria_data', JSON.stringify(data));
                console.log('💾 Dados salvos no localStorage');
            } catch (error) {
                console.error('❌ Erro ao salvar dados:', error);
            }
        }

        /**
         * Carrega dados do localStorage
         */
        function loadData() {
            try {
                const savedData = localStorage.getItem('centuria_data');
                if (savedData) {
                    const data = JSON.parse(savedData);
                    
                    // Carregar arrays de dados
                    users = data.users || getDefaultUsers();
                    investments = data.investments || [];
                    userInvestments = data.userInvestments || [];
                    transactions = data.transactions || [];
                    
                    // Carregar configurações da plataforma
                    if (data.platformSettings) {
                        platformSettings = { ...platformSettings, ...data.platformSettings };
                    }
                    
                    console.log('✅ Dados carregados do localStorage');
                    console.log(`👥 ${users.length} usuários carregados`);
                    console.log(`📈 ${investments.length} investimentos carregados`);
                    console.log(`💰 ${transactions.length} transações carregadas`);
                    
                    return true;
                }
            } catch (error) {
                console.error('❌ Erro ao carregar dados:', error);
            }
            
            // Se não conseguir carregar, usar dados padrão
            users = getDefaultUsers();
            investments = [];
            userInvestments = [];
            transactions = getDefaultTransactions();
            console.log('📝 Usando dados padrão');
            return false;
        }

        /**
         * Retorna usuários padrão do sistema
         */
        function getDefaultUsers() {
            return [
                {
                    id: 1,
                    name: "Admin",
                    email: "admin@centuria.com",
                    password: "admin123",
                    cpf: "000.000.000-00",
                    isAdmin: true,
                    balance: 10000,
                    investments: [],
                    transactions: [],
                    pixKey: null
                }
            ];
        }

        /**
         * Retorna transações padrão do sistema
         */
        function getDefaultTransactions() {
            return [
                {
                    id: 1,
                    userId: 1,
                    type: 'Depósito PIX Inicial',
                    amount: 10000,
                    method: 'PIX',
                    date: new Date(Date.now() - 86400000)
                }
            ];
        }

        /**
         * Força sincronização de dados (para múltiplas abas)
         */
        function syncData() {
            loadData();
            if (currentUser && currentUser.isAdmin) {
                updateAdminDashboard();
            } else if (currentUser) {
                updateUserDashboard();
            }
        }

        // ====================================
        // DADOS INICIAIS DO SISTEMA
        // ====================================
        
        // Arrays principais - serão carregados do localStorage
        let users = [];
        let investments = [];
        let userInvestments = [];
        let transactions = [];
        let currentUser = null;
        
        // ====================================
        // CONFIGURAÇÕES DA PLATAFORMA
        // ====================================
        
        // Configurações gerais da plataforma - podem ser alteradas pelo admin
        let platformSettings = {
            name: "Centúria",
            subtitle: "Sua plataforma de investimentos inteligente",
            primaryColor: "#00d4ff",
            secondaryColor: "#7c3aed",
            minimumDeposit: 10,        // Valor mínimo para depósitos
            withdrawalFee: 0,          // Taxa de saque em porcentagem
            maintenanceMode: false     // Modo manutenção da plataforma
        };

        // ====================================
        // CONFIGURAÇÃO PIX - API DE PAGAMENTOS
        // ====================================
        
        // Variáveis globais para controle do PIX
        let currentPixPayment = null;
        let pixCheckInterval = null;
        let pixTimeoutTimer = null;
        
        // CONFIGURAÇÕES PIX - SUBSTITUA PELAS SUAS CREDENCIAIS
        const PIX_CONFIG = {
            // === MERCADO PAGO ===
            // Substitua pela sua chave de acesso do Mercado Pago
            MERCADO_PAGO_ACCESS_TOKEN: 'SEU_ACCESS_TOKEN_AQUI',
            MERCADO_PAGO_API_URL: 'https://api.mercadopago.com/v1/payments',
            
            // Configuração geral
            EXPIRATION_MINUTES: 15, // Tempo de expiração do PIX em minutos
            CHECK_INTERVAL: 10000,  // Intervalo de verificação em milissegundos (10 segundos)
        };

        // ====================================
        // FUNÇÕES DE UI E VALIDAÇÃO
        // ====================================
        
        /**
         * Mostra indicador de carregamento em um elemento
         */
        function showLoading(element) {
            element.classList.add('loading');
        }

        /**
         * Remove indicador de carregamento de um elemento
         */
        function hideLoading(element) {
            element.classList.remove('loading');
        }

        /**
         * Exibe notificação de sucesso
         */
        function showSuccess(message) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: linear-gradient(135deg, var(--success), #059669);
                color: white;
                padding: 16px 24px;
                border-radius: 12px;
                font-weight: 600;
                z-index: 10000;
                animation: slideInRight 0.4s ease-out;
                box-shadow: 0 8px 25px rgba(16, 185, 129, 0.3);
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOutRight 0.4s ease-out';
                setTimeout(() => notification.remove(), 400);
            }, 3000);
        }

        /**
         * Exibe notificação de erro
         */
        function showError(message) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: linear-gradient(135deg, var(--error), #dc2626);
                color: white;
                padding: 16px 24px;
                border-radius: 12px;
                font-weight: 600;
                z-index: 10000;
                animation: slideInRight 0.4s ease-out;
                box-shadow: 0 8px 25px rgba(239, 68, 68, 0.3);
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOutRight 0.4s ease-out';
                setTimeout(() => notification.remove(), 400);
            }, 4000);
        }

        // Adicionar animações CSS para notificações
        const notificationStyles = document.createElement('style');
        notificationStyles.textContent = `
            @keyframes slideInRight {
                from {
                    opacity: 0;
                    transform: translateX(100%);
                }
                to {
                    opacity: 1;
                    transform: translateX(0);
                }
            }
            @keyframes slideOutRight {
                from {
                    opacity: 1;
                    transform: translateX(0);
                }
                to {
                    opacity: 0;
                    transform: translateX(100%);
                }
            }
        `;
        document.head.appendChild(notificationStyles);

        // ====================================
        // FUNÇÕES DE AUTENTICAÇÃO
        // ====================================
        
        /**
         * Valida força da senha durante o registro
         */
        function validatePassword() {
            const password = document.getElementById('registerPassword').value;
            const strengthDiv = document.getElementById('passwordStrength');
            
            if (password.length === 0) {
                strengthDiv.textContent = '';
                return;
            }
            
            if (password.length < 6) {
                strengthDiv.innerHTML = '❌ Senha muito curta (mínimo 6 caracteres)';
                strengthDiv.style.color = 'var(--error)';
            } else {
                strengthDiv.innerHTML = '✅ Senha válida';
                strengthDiv.style.color = 'var(--success)';
            }
            
            validatePasswordMatch();
        }

        /**
         * Valida se as senhas coincidem
         */
        function validatePasswordMatch() {
            const password = document.getElementById('registerPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            const matchDiv = document.getElementById('passwordMatch');
            
            if (confirmPassword.length === 0) {
                matchDiv.textContent = '';
                return;
            }
            
            if (password === confirmPassword) {
                matchDiv.innerHTML = '✅ Senhas coincidem';
                matchDiv.style.color = 'var(--success)';
            } else {
                matchDiv.innerHTML = '❌ Senhas não coincidem';
                matchDiv.style.color = 'var(--error)';
            }
        }

        /**
         * Alterna visibilidade da senha
         */
        function togglePassword(inputId) {
            const input = document.getElementById(inputId);
            const button = input.nextElementSibling;
            
            if (input.type === 'password') {
                input.type = 'text';
                button.textContent = '🙈';
            } else {
                input.type = 'password';
                button.textContent = '👁️';
            }
        }

        /**
         * Mostra formulário de registro
         */
        function showRegister() {
            document.getElementById('loginForm').classList.add('hidden');
            document.getElementById('registerForm').classList.remove('hidden');
            
            document.getElementById('passwordStrength').textContent = '';
            document.getElementById('passwordMatch').textContent = '';
        }

        /**
         * Mostra formulário de login
         */
        function showLogin() {
            document.getElementById('registerForm').classList.add('hidden');
            document.getElementById('loginForm').classList.remove('hidden');
            
            const strengthDiv = document.getElementById('passwordStrength');
            const matchDiv = document.getElementById('passwordMatch');
            if (strengthDiv) strengthDiv.textContent = '';
            if (matchDiv) matchDiv.textContent = '';
        }

        /**
         * Registra um novo usuário
         */
        function register() {
            const name = document.getElementById('registerName').value;
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            const cpf = document.getElementById('registerCPF').value;

            if (!name || !email || !password || !confirmPassword || !cpf) {
                showError('Por favor, preencha todos os campos!');
                return;
            }

            if (password.length < 6) {
                showError('A senha deve ter pelo menos 6 caracteres!');
                return;
            }

            if (password !== confirmPassword) {
                showError('As senhas não coincidem!');
                return;
            }

            if (users.find(u => u.email === email)) {
                showError('Este email já está cadastrado!');
                return;
            }

            // Gerar ID único
            const newId = Math.max(...users.map(u => u.id), 0) + 1;

            const newUser = {
                id: newId,
                name,
                email,
                password,
                cpf,
                isAdmin: false,
                balance: 0, // Sempre começar com saldo zero
                investments: [],
                transactions: [],
                pixKey: null // Nova propriedade para chave PIX
            };

            users.push(newUser);
            
            // 💾 SALVAR DADOS NO LOCALSTORAGE
            saveData();
            
            showSuccess(`Conta criada com sucesso! Você começou com saldo R$ 0,00`);
            showLogin();
            
            if (currentUser && currentUser.isAdmin) {
                setTimeout(() => {
                    updateAdminDashboard();
                }, 100);
            }
        }

        /**
         * Faz login do usuário
         */
        function login() {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            const loginBtn = document.querySelector('#loginForm .btn');

            if (!email || !password) {
                showError('Por favor, preencha todos os campos!');
                return;
            }

            if (password.length < 6) {
                showError('A senha deve ter pelo menos 6 caracteres!');
                return;
            }

            showLoading(loginBtn);

            // Simular delay de autenticação
            setTimeout(() => {
                const user = users.find(u => u.email === email && u.password === password);
                
                hideLoading(loginBtn);
                
                if (!user) {
                    showError('Email ou senha incorretos!');
                    return;
                }

                currentUser = user;
                document.getElementById('authScreen').style.display = 'none';
                
                showSuccess(`Bem-vindo, ${user.name}! Saldo atual: ${formatCurrency(user.balance)}`);
                
                setTimeout(() => {
                    applyPlatformTheme();
                }, 100);
                
                if (user.isAdmin) {
                    showAdminDashboard();
                } else {
                    showUserDashboard();
                }
            }, 1000);
        }

        /**
         * Faz logout do usuário
         */
        function logout() {
            currentUser = null;
            
            document.getElementById('authScreen').style.display = 'flex';
            document.getElementById('userDashboard').style.display = 'none';
            document.getElementById('adminDashboard').style.display = 'none';
            
            // Limpar campos
            document.getElementById('loginEmail').value = '';
            document.getElementById('loginPassword').value = '';
            document.getElementById('registerName').value = '';
            document.getElementById('registerEmail').value = '';
            document.getElementById('registerPassword').value = '';
            document.getElementById('confirmPassword').value = '';
            document.getElementById('registerCPF').value = '';
            
            document.getElementById('passwordStrength').textContent = '';
            document.getElementById('passwordMatch').textContent = '';
            
            showLogin();
            showSuccess('Logout realizado com sucesso!');
        }

        function showUserDashboard() {
            document.getElementById('userDashboard').style.display = 'block';
            document.getElementById('adminDashboard').style.display = 'none';
            document.getElementById('userName').textContent = currentUser.name;
            
            setTimeout(() => {
                applyPlatformTheme();
                updateUserDashboard();
            }, 100);
        }

        function updateUserDashboard() {
            document.getElementById('totalBalance').textContent = formatCurrency(currentUser.balance);
            updateAvailableInvestments();
            updateUserInvestments();
            updateRecentTransactions();
        }

        function updateAvailableInvestments() {
            const container = document.getElementById('availableInvestments');
            if (!container) return;
            
            container.innerHTML = '';
            
            // Verificar se existem investimentos cadastrados
            if (investments.length === 0) {
                container.innerHTML = `
                    <div style="
                        text-align: center; 
                        color: var(--text-secondary); 
                        padding: 40px 20px;
                        background: rgba(255, 255, 255, 0.03);
                        border: 1px solid rgba(255, 255, 255, 0.1);
                        border-radius: 16px;
                    ">
                        <div style="font-size: 3rem; margin-bottom: 16px; opacity: 0.5;">📈</div>
                        <h4 style="color: var(--text-primary); margin-bottom: 8px; font-weight: 600;">
                            Nenhum investimento disponível
                        </h4>
                        <p style="font-size: 0.9rem; line-height: 1.4;">
                            Os administradores ainda não cadastraram opções de investimento.<br>
                            Fique atento para novas oportunidades!
                        </p>
                    </div>
                `;
                return;
            }
            
            investments.forEach((investment, index) => {
                const div = document.createElement('div');
                div.className = 'investment-item';
                div.style.animationDelay = `${index * 0.1}s`;
                div.innerHTML = `
                    <div class="investment-info">
                        <h4>${investment.name}</h4>
                        <p>${investment.description} - Mín: ${formatCurrency(investment.minAmount)}</p>
                    </div>
                    <div class="investment-return">
                        <div class="rate">${investment.rate}% a.a.</div>
                        <button class="btn-invest-standard" onclick="openDirectInvestModal(${investment.id})">
                            🚀 Investir
                        </button>
                    </div>
                `;
                container.appendChild(div);
            });
        }

        function updateUserInvestments() {
            const container = document.getElementById('userInvestments');
            container.innerHTML = '';
            
            const userInvs = userInvestments.filter(inv => inv.userId === currentUser.id);
            
            if (userInvs.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: var(--text-secondary); padding: 20px;">Você ainda não possui investimentos.</p>';
                return;
            }
            
            userInvs.forEach((userInv, index) => {
                const investment = investments.find(inv => inv.id === userInv.investmentId);
                if (!investment) return;
                
                const div = document.createElement('div');
                div.className = 'investment-item';
                div.style.animationDelay = `${index * 0.1}s`;
                div.innerHTML = `
                    <div class="investment-info">
                        <h4>${investment.name}</h4>
                        <p>Investido: ${formatCurrency(userInv.amount)} em ${formatDate(userInv.date)}</p>
                    </div>
                    <div class="investment-return">
                        <div class="rate">${investment.rate}% a.a.</div>
                    </div>
                `;
                container.appendChild(div);
            });
        }

        function updateRecentTransactions() {
            const container = document.getElementById('recentTransactions');
            container.innerHTML = '';
            
            const userTransactions = transactions
                .filter(t => t.userId === currentUser.id)
                .sort((a, b) => new Date(b.date) - new Date(a.date))
                .slice(0, 5);
            
            if (userTransactions.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: var(--text-secondary); padding: 20px;">Nenhuma transação encontrada.</p>';
                return;
            }
            
            userTransactions.forEach((transaction, index) => {
                const div = document.createElement('div');
                div.className = 'transaction-item';
                div.style.animationDelay = `${index * 0.1}s`;
                div.innerHTML = `
                    <div class="transaction-info">
                        <h4>${transaction.type}</h4>
                        <p>${formatDate(transaction.date)} - ${transaction.method || ''}</p>
                    </div>
                    <div class="transaction-amount ${transaction.amount > 0 ? 'positive' : 'negative'}">
                        ${transaction.amount > 0 ? '+' : ''}${formatCurrency(transaction.amount)}
                    </div>
                `;
                container.appendChild(div);
            });
        }

        function showAdminDashboard() {
            document.getElementById('adminDashboard').style.display = 'block';
            document.getElementById('userDashboard').style.display = 'none';
            document.getElementById('adminName').textContent = currentUser.name;
            
            setTimeout(() => {
                updateAdminDashboard();
                applyPlatformTheme();
            }, 100);
        }

        function updateAdminDashboard() {
            updateAdminStats();
            updateUsersTable();
            updateInvestmentsList();
            updateAllTransactions();
        }

        function updateAdminStats() {
            const totalUsers = users.filter(u => !u.isAdmin).length;
            const totalInvested = userInvestments.reduce((sum, inv) => sum + inv.amount, 0);
            const totalDeposited = transactions
                .filter(t => t.type === 'Depósito' || t.type === 'Depósito PIX')
                .reduce((sum, t) => sum + t.amount, 0);
            const activeInvestments = userInvestments.length;
            
            // Animação dos números
            animateValue('totalUsers', 0, totalUsers, 1000, false);
            animateValue('totalInvested', 0, totalInvested, 1500, true);
            animateValue('totalDeposited', 0, totalDeposited, 1500, true);
            animateValue('activeInvestments', 0, activeInvestments, 1000, false);
        }

        function animateValue(id, start, end, duration, isCurrency = false) {
            const element = document.getElementById(id);
            if (!element) return;
            
            // Aplicar classe de tamanho baseada no valor final
            const sizeClass = getNumberSizeClass(end, isCurrency);
            element.className = `value ${sizeClass}`;
            
            const range = end - start;
            const increment = range / (duration / 16);
            let current = start;
            
            const timer = setInterval(() => {
                current += increment;
                if (current >= end) {
                    current = end;
                    clearInterval(timer);
                }
                
                if (isCurrency) {
                    element.textContent = formatLargeNumber(current, true);
                } else {
                    element.textContent = formatLargeNumber(Math.floor(current), false);
                }
            }, 16);
        }

        function updateUsersTable() {
            const tbody = document.getElementById('usersTableBody');
            if (!tbody) return;
            
            tbody.innerHTML = '';
            
            const nonAdminUsers = users.filter(u => !u.isAdmin);
            
            if (nonAdminUsers.length === 0) {
                const row = document.createElement('tr');
                row.innerHTML = '<td colspan="7" style="text-align: center; padding: 40px; color: var(--text-secondary);">Nenhum usuário cadastrado ainda</td>';
                tbody.appendChild(row);
                return;
            }
            
            nonAdminUsers.forEach((user, index) => {
                const totalInvested = userInvestments
                    .filter(inv => inv.userId === user.id)
                    .reduce((sum, inv) => sum + inv.amount, 0);
                
                const row = document.createElement('tr');
                row.style.animationDelay = `${index * 0.1}s`;
                row.innerHTML = `
                    <td>${user.name}</td>
                    <td>${user.email}</td>
                    <td>${user.cpf}</td>
                    <td style="color: var(--text-secondary); font-size: 0.9rem;">
                        ${user.pixKey ? `🔑 ${user.pixKey.length > 20 ? user.pixKey.substring(0, 20) + '...' : user.pixKey}` : '❌ Não cadastrada'}
                    </td>
                    <td>${formatCurrency(user.balance)}</td>
                    <td>${formatCurrency(totalInvested)}</td>
                    <td>
                        <button class="btn btn-small" onclick="editUser(${user.id})" style="background: var(--primary-color);">✏️ Editar</button>
                        <button class="btn btn-small" onclick="deleteUser(${user.id})" style="background: var(--error);">🗑️ Excluir</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        function updateInvestmentsList() {
            const container = document.getElementById('investmentsList');
            container.innerHTML = '';
            
            if (investments.length === 0) {
                container.innerHTML = `
                    <div style="
                        text-align: center; 
                        color: var(--text-secondary); 
                        padding: 40px 20px;
                        background: rgba(255, 255, 255, 0.03);
                        border: 1px solid rgba(255, 255, 255, 0.1);
                        border-radius: 16px;
                    ">
                        <div style="font-size: 3rem; margin-bottom: 16px; opacity: 0.5;">📈</div>
                        <h4 style="color: var(--text-primary); margin-bottom: 8px; font-weight: 600;">
                            Nenhum investimento cadastrado
                        </h4>
                        <p style="font-size: 0.9rem; line-height: 1.4;">
                            Clique em "Adicionar Investimento" para criar novas opções para os usuários.
                        </p>
                    </div>
                `;
                return;
            }
            
            investments.forEach((investment, index) => {
                const div = document.createElement('div');
                div.className = 'investment-item';
                div.style.animationDelay = `${index * 0.1}s`;
                div.innerHTML = `
                    <div class="investment-info">
                        <h4>${investment.name}</h4>
                        <p>${investment.description} - Taxa: ${investment.rate}% - Mín: ${formatCurrency(investment.minAmount)}</p>
                    </div>
                    <div>
                        <button class="btn btn-small" onclick="editInvestment(${investment.id})" style="background: var(--primary-color);">✏️ Editar</button>
                        <button class="btn btn-small" onclick="deleteInvestment(${investment.id})" style="background: var(--error);">🗑️ Excluir</button>
                    </div>
                `;
                container.appendChild(div);
            });
        }

        function updateAllTransactions() {
            const container = document.getElementById('allTransactions');
            container.innerHTML = '';
            
            const allTransactions = transactions
                .sort((a, b) => new Date(b.date) - new Date(a.date))
                .slice(0, 20);
            
            if (allTransactions.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: var(--text-secondary); padding: 20px;">Nenhuma transação encontrada.</p>';
                return;
            }
            
            allTransactions.forEach((transaction, index) => {
                const user = users.find(u => u.id === transaction.userId);
                const div = document.createElement('div');
                div.className = 'transaction-item';
                div.style.animationDelay = `${index * 0.05}s`;
                div.innerHTML = `
                    <div class="transaction-info">
                        <h4>${transaction.type} - ${user ? user.name : 'Usuário removido'}</h4>
                        <p>${formatDate(transaction.date)} - ${transaction.method || ''}</p>
                    </div>
                    <div class="transaction-amount ${transaction.amount > 0 ? 'positive' : 'negative'}">
                        ${transaction.amount > 0 ? '+' : ''}${formatCurrency(transaction.amount)}
                    </div>
                `;
                container.appendChild(div);
            });
        }

        function forceUpdateAdmin() {
            const btn = event.target;
            showLoading(btn);
            
            setTimeout(() => {
                // 🔄 Recarregar dados do localStorage
                syncData();
                
                updateAdminDashboard();
                hideLoading(btn);
                showSuccess(`Dashboard atualizado! ${users.filter(u => !u.isAdmin).length} usuários encontrados.`);
            }, 1000);
        }

        function switchToUser() {
            showUserDashboard();
        }

        // ====================================
        // FUNÇÕES PIX - INTEGRAÇÃO COM API
        // ====================================
        
        /**
         * Gera um pagamento PIX via API do provedor
         */
        async function generatePixPayment(amount) {
            console.log('🔄 Gerando pagamento PIX para:', formatCurrency(amount));
            
            // Esconder formulário e mostrar tela PIX
            document.getElementById('depositForm').style.display = 'none';
            document.getElementById('pixPayment').style.display = 'block';
            
            // Atualizar valores na interface
            document.getElementById('pixAmount').textContent = formatCurrency(amount);
            
            try {
                // ===============================================
                // 🧪 SIMULAÇÃO (REMOVA EM PRODUÇÃO)
                // ===============================================
                
                // Gerar código PIX simulado
                const pixCode = generateMockPixCode(amount);
                document.getElementById('pixCode').value = pixCode;
                
                // Gerar QR Code simulado
                generateQRCode(pixCode);
                
                // Criar objeto de pagamento simulado
                currentPixPayment = {
                    id: 'PIX_SIMULADO_' + Date.now(),
                    amount: amount,
                    status: 'pending',
                    code: pixCode,
                    createdAt: new Date(),
                    expiresAt: new Date(Date.now() + PIX_CONFIG.EXPIRATION_MINUTES * 60 * 1000)
                };
                
                console.log('✅ PIX gerado:', currentPixPayment.id);
                
            } catch (error) {
                console.error('❌ Erro ao gerar PIX:', error);
                showError('Erro ao gerar PIX. Tente novamente.');
                
                // Voltar para o formulário em caso de erro
                document.getElementById('depositForm').style.display = 'block';
                document.getElementById('pixPayment').style.display = 'none';
                return;
            }
            
            // Iniciar monitoramento do pagamento
            startPixMonitoring();
            
            // Configurar timer de expiração
            pixTimeoutTimer = setTimeout(() => {
                expirePixPayment();
            }, PIX_CONFIG.EXPIRATION_MINUTES * 60 * 1000);
        }
        
        /**
         * Gera código PIX simulado (REMOVA EM PRODUÇÃO)
         */
        function generateMockPixCode(amount) {
            const merchantName = platformSettings.name.toUpperCase();
            const merchantCity = "SAO PAULO";
            const pixKey = "pix@" + window.location.hostname.replace('www.', '');
            
            // Código EMV simplificado para simulação
            const baseCode = `00020126${String(pixKey.length).padStart(2, '0')}${pixKey}5204000053039865802BR5925${merchantName}6009${merchantCity}`;
            const amountStr = amount.toFixed(2);
            const amountCode = `54${String(amountStr.length).padStart(2, '0')}${amountStr}`;
            
            return baseCode + amountCode + '6304' + generateCRC16(baseCode + amountCode);
        }
        
        /**
         * Gera CRC16 simulado (REMOVA EM PRODUÇÃO)
         */
        function generateCRC16(data) {
            return Math.random().toString(36).substr(2, 4).toUpperCase();
        }
        
        /**
         * Inicia o monitoramento do status do pagamento PIX
         */
        function startPixMonitoring() {
            console.log('🔄 Iniciando monitoramento PIX...');
            
            let attempts = 0;
            const maxAttempts = (PIX_CONFIG.EXPIRATION_MINUTES * 60) / (PIX_CONFIG.CHECK_INTERVAL / 1000);
            
            pixCheckInterval = setInterval(async () => {
                attempts++;
                
                try {
                    // ===============================================
                    // 🧪 SIMULAÇÃO (REMOVA EM PRODUÇÃO) 
                    // ===============================================
                    
                    // Simular aprovação aleatória após 30 segundos (10% de chance a cada verificação)
                    if (attempts > 3 && Math.random() < 0.1) {
                        confirmPixPayment();
                        return;
                    }
                    
                } catch (error) {
                    console.error('❌ Erro ao verificar PIX:', error);
                }
                
                // Timeout após tempo limite
                if (attempts >= maxAttempts) {
                    expirePixPayment();
                    return;
                }
                
                // Atualizar timer na interface
                updatePixTimer();
                
            }, PIX_CONFIG.CHECK_INTERVAL);
        }
        
        /**
         * Confirma o pagamento PIX e atualiza o saldo do usuário
         */
        function confirmPixPayment() {
            if (!currentPixPayment) return;
            
            console.log('✅ PIX confirmado:', currentPixPayment.id);
            
            // Parar monitoramento
            clearInterval(pixCheckInterval);
            clearTimeout(pixTimeoutTimer);
            
            // Atualizar status
            currentPixPayment.status = 'confirmed';
            
            // Atualizar interface
            const statusDiv = document.getElementById('paymentStatus');
            statusDiv.className = 'payment-success';
            statusDiv.innerHTML = `
                <div class="status-text" style="color: var(--success); font-weight: 600; margin-bottom: 8px;">
                    ✅ Pagamento Confirmado!
                </div>
                <div style="color: var(--text-secondary); font-size: 0.9rem;">
                    Seu saldo será atualizado em instantes
                </div>
            `;
            
            // Processar pagamento no sistema
            setTimeout(() => {
                // Atualizar saldo do usuário
                currentUser.balance += currentPixPayment.amount;
                
                // Registrar transação
                const newTransactionId = Math.max(...transactions.map(t => t.id), 0) + 1;
                const transaction = {
                    id: newTransactionId,
                    userId: currentUser.id,
                    type: 'Depósito PIX',
                    amount: currentPixPayment.amount,
                    method: 'PIX',
                    date: new Date(),
                    pixId: currentPixPayment.id
                };
                
                transactions.push(transaction);
                
                // 💾 SALVAR DADOS NO LOCALSTORAGE
                saveData();
                
                updateUserDashboard();
                
                showSuccess(`Depósito de ${formatCurrency(currentPixPayment.amount)} confirmado!`);
                
                // Fechar modal após 2 segundos
                setTimeout(() => {
                    closeModal('depositModal');
                    currentPixPayment = null;
                }, 2000);
                
            }, 1500);
        }
        
        /**
         * Expira o pagamento PIX por timeout
         */
        function expirePixPayment() {
            if (!currentPixPayment) return;
            
            console.log('⏰ PIX expirado:', currentPixPayment.id);
            
            // Parar monitoramento
            clearInterval(pixCheckInterval);
            clearTimeout(pixTimeoutTimer);
            
            // Atualizar status
            currentPixPayment.status = 'expired';
            
            // Atualizar interface
            const statusDiv = document.getElementById('paymentStatus');
            statusDiv.className = 'payment-expired';
            statusDiv.innerHTML = `
                <div class="status-text" style="color: var(--error); font-weight: 600; margin-bottom: 8px;">
                    ⏰ Pagamento Expirado
                </div>
                <div style="color: var(--text-secondary); font-size: 0.9rem;">
                    Gere uma nova cobrança para continuar
                </div>
            `;
            
            showError('Tempo para pagamento expirado. Gere uma nova cobrança.');
        }
        
        /**
         * Atualiza o timer de expiração na interface
         */
        function updatePixTimer() {
            if (!currentPixPayment) return;
            
            const now = new Date();
            const expiresAt = new Date(currentPixPayment.expiresAt);
            const remaining = Math.max(0, expiresAt - now);
            
            if (remaining <= 0) {
                expirePixPayment();
                return;
            }
            
            const minutes = Math.floor(remaining / 60000);
            const seconds = Math.floor((remaining % 60000) / 1000);
            
            // Atualizar timer se existir na interface
            const timerElement = document.querySelector('.pix-timer');
            if (timerElement) {
                timerElement.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            }
        }
        
        /**
         * Verifica manualmente o status do pagamento
         */
        function checkPaymentStatus() {
            if (!currentPixPayment) return;
            
            const btn = event.target;
            showLoading(btn);
            
            console.log('🔄 Verificação manual do PIX:', currentPixPayment.id);
            
            // Simulação de verificação manual
            setTimeout(() => {
                hideLoading(btn);
                
                // 20% de chance de sucesso na verificação manual
                if (Math.random() < 0.2) {
                    confirmPixPayment();
                } else {
                    showError('Pagamento ainda não foi detectado. Tente novamente em alguns instantes.');
                }
            }, 2000);
        }
        
        /**
         * Cancela o pagamento PIX
         */
        function cancelPixPayment() {
            console.log('❌ PIX cancelado pelo usuário');
            
            if (currentPixPayment) {
                clearInterval(pixCheckInterval);
                clearTimeout(pixTimeoutTimer);
                currentPixPayment = null;
            }
            
            closeModal('depositModal');
            showError('Pagamento PIX cancelado.');
        }
        
        /**
         * Simula pagamento instantâneo (APENAS PARA TESTES - REMOVA EM PRODUÇÃO)
         */
        function simulatePixPayment() {
            if (currentPixPayment && currentPixPayment.status === 'pending') {
                console.log('🧪 Simulando confirmação do PIX...');
                showSuccess('Simulando pagamento PIX...');
                setTimeout(() => {
                    confirmPixPayment();
                }, 1000);
            }
        }

        function generateQRCode(pixCode) {
            const qrContainer = document.getElementById('qrcode');
            qrContainer.innerHTML = '';
            
            try {
                const qr = new QRious({
                    element: document.createElement('canvas'),
                    value: pixCode,
                    size: 200,
                    level: 'M',
                    foreground: '#000000',
                    background: '#ffffff'
                });
                
                qrContainer.appendChild(qr.element);
            } catch (error) {
                // Fallback se a biblioteca QR não estiver disponível
                qrContainer.innerHTML = `
                    <div style="
                        width: 200px;
                        height: 200px;
                        background: #f0f0f0;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        border-radius: 8px;
                        color: #666;
                        font-size: 14px;
                        text-align: center;
                    ">
                        QR Code<br>
                        <small>Use o código PIX abaixo</small>
                    </div>
                `;
            }
        }

        function copyPixCode() {
            const pixCodeInput = document.getElementById('pixCode');
            pixCodeInput.select();
            pixCodeInput.setSelectionRange(0, 99999);
            
            try {
                document.execCommand('copy');
                showSuccess('Código PIX copiado!');
            } catch (err) {
                // Fallback para navegadores mais antigos
                navigator.clipboard.writeText(pixCodeInput.value).then(() => {
                    showSuccess('Código PIX copiado!');
                }).catch(() => {
                    showError('Não foi possível copiar o código');
                });
            }
        }

        // Funções de Transações
        function processDeposit() {
            const amount = parseFloat(document.getElementById('depositAmount').value);
            const btn = document.querySelector('#depositForm .btn');
            
            if (!amount || amount <= 0) {
                showError('Por favor, insira um valor válido!');
                return;
            }
            
            if (amount < platformSettings.minimumDeposit) {
                showError(`Valor mínimo para depósito é ${formatCurrency(platformSettings.minimumDeposit)}`);
                return;
            }

            // Sempre usar PIX
            generatePixPayment(amount);
        }

        function processWithdraw() {
            const amount = parseFloat(document.getElementById('withdrawAmount').value);
            const pixKey = document.getElementById('withdrawPixKey').value.trim();
            const pixKeyType = document.getElementById('pixKeyType').value;
            const btn = document.querySelector('#withdrawModal .btn');
            
            if (!amount || amount <= 0) {
                showError('Por favor, insira um valor válido!');
                return;
            }
            
            if (!pixKey) {
                showError('Por favor, informe sua chave PIX!');
                return;
            }
            
            // Validação básica da chave PIX
            if (!validatePixKey(pixKey, pixKeyType)) {
                showError('Chave PIX inválida! Verifique o formato.');
                return;
            }
            
            const fee = (amount * platformSettings.withdrawalFee) / 100;
            const totalDeduction = amount + fee;
            
            if (totalDeduction > currentUser.balance) {
                showError(`Saldo insuficiente! Valor solicitado: ${formatCurrency(amount)} + Taxa: ${formatCurrency(fee)} = ${formatCurrency(totalDeduction)}`);
                return;
            }
            
            showLoading(btn);
            
            setTimeout(() => {
                currentUser.balance -= totalDeduction;
                
                // Gerar ID único para transação
                let newTransactionId = Math.max(...transactions.map(t => t.id), 0) + 1;
                
                // Salvar chave PIX no perfil do usuário para futuros saques
                currentUser.pixKey = pixKey;
                
                // Criar descrição detalhada do método
                const methodDescription = `PIX - ${pixKey}`;
                
                const transaction = {
                    id: newTransactionId,
                    userId: currentUser.id,
                    type: 'Saque PIX',
                    amount: -amount,
                    method: methodDescription,
                    date: new Date()
                };
                transactions.push(transaction);
                
                if (fee > 0) {
                    const feeTransaction = {
                        id: newTransactionId + 1,
                        userId: currentUser.id,
                        type: 'Taxa de Saque',
                        amount: -fee,
                        method: 'Taxa Administrativa',
                        date: new Date()
                    };
                    transactions.push(feeTransaction);
                }
                
                // 💾 SALVAR DADOS NO LOCALSTORAGE
                saveData();
                
                updateUserDashboard();
                hideLoading(btn);
                closeModal('withdrawModal');
                
                if (fee > 0) {
                    showSuccess(`Saque PIX realizado! Valor: ${formatCurrency(amount)}, Taxa: ${formatCurrency(fee)}`);
                } else {
                    showSuccess(`Saque PIX de ${formatCurrency(amount)} realizado com sucesso!`);
                }
            }, 1500);
        }

        // Nova função para atualizar placeholder da chave PIX
        function updatePixKeyPlaceholder() {
            const pixKeyType = document.getElementById('pixKeyType').value;
            const pixKeyInput = document.getElementById('withdrawPixKey');
            
            const placeholders = {
                'cpf': '000.000.000-00',
                'email': 'seu@email.com',
                'phone': '(11) 99999-9999',
                'random': 'chave-aleatoria-uuid'
            };
            
            pixKeyInput.placeholder = placeholders[pixKeyType];
            
            // Auto-preencher CPF ou email se disponível no perfil
            if (pixKeyType === 'cpf' && currentUser.cpf) {
                pixKeyInput.value = currentUser.cpf;
            } else if (pixKeyType === 'email' && currentUser.email) {
                pixKeyInput.value = currentUser.email;
            } else if (currentUser.pixKey && !pixKeyInput.value) {
                // Manter chave salva se não houver valor específico
                pixKeyInput.value = currentUser.pixKey;
            }
        }

        // Nova função para validar formato da chave PIX
        function validatePixKey(pixKey, pixKeyType) {
            if (!pixKey || pixKey.length < 3) return false;
            
            switch (pixKeyType) {
                case 'cpf':
                    // Validação básica de CPF (formato)
                    const cpfRegex = /^\d{3}\.\d{3}\.\d{3}-\d{2}$/;
                    return cpfRegex.test(pixKey) || /^\d{11}$/.test(pixKey.replace(/\D/g, ''));
                
                case 'email':
                    // Validação básica de email
                    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                    return emailRegex.test(pixKey);
                
                case 'phone':
                    // Validação básica de telefone (formato brasileiro)
                    const phoneRegex = /^\(\d{2}\)\s\d{4,5}-\d{4}$/;
                    return phoneRegex.test(pixKey) || /^\d{10,11}$/.test(pixKey.replace(/\D/g, ''));
                
                case 'random':
                    // Chave aleatória - aceitar qualquer string com mais de 10 caracteres
                    return pixKey.length >= 10;
                
                default:
                    return true;
            }
        }

        function checkInvestmentsAndOpen() {
            if (investments.length === 0) {
                showError('Nenhum investimento disponível no momento. Os administradores ainda não cadastraram opções de investimento.');
                return;
            }
            openInvestModal();
        }

        function processInvestment() {
            // Busca o ID do investimento selecionado
            const selectedIdField = document.getElementById('selectedInvestmentId');
            let investmentId = null;
            
            if (selectedIdField && selectedIdField.value) {
                investmentId = parseInt(selectedIdField.value);
            }
            
            const amount = parseFloat(document.getElementById('investAmount').value);
            const btn = document.querySelector('#investModal .btn');
            
            // Validações
            if (!investmentId) {
                showError('Por favor, selecione um investimento!');
                return;
            }
            
            if (!amount || amount <= 0) {
                showError('Por favor, insira um valor válido!');
                return;
            }
            
            // Busca o investimento
            const investment = investments.find(inv => inv.id === investmentId);
            
            if (!investment) {
                showError('Investimento não encontrado ou não disponível!');
                return;
            }
            
            if (amount < investment.minAmount) {
                showError(`Valor mínimo para este investimento é ${formatCurrency(investment.minAmount)}`);
                return;
            }
            
            if (amount > currentUser.balance) {
                showError('Saldo insuficiente!');
                return;
            }
            
            showLoading(btn);
            
            setTimeout(() => {
                currentUser.balance -= amount;
                
                // Gerar IDs únicos
                const newUserInvestmentId = Math.max(...userInvestments.map(inv => inv.id), 0) + 1;
                const newTransactionId = Math.max(...transactions.map(t => t.id), 0) + 1;
                
                const userInvestment = {
                    id: newUserInvestmentId,
                    userId: currentUser.id,
                    investmentId: investmentId,
                    amount: amount,
                    date: new Date()
                };
                
                userInvestments.push(userInvestment);
                
                const transaction = {
                    id: newTransactionId,
                    userId: currentUser.id,
                    type: 'Investimento',
                    amount: -amount,
                    method: investment.name,
                    date: new Date()
                };
                
                transactions.push(transaction);
                
                // 💾 SALVAR DADOS NO LOCALSTORAGE
                saveData();
                
                updateUserDashboard();
                hideLoading(btn);
                closeModal('investModal');
                showSuccess(`Investimento de ${formatCurrency(amount)} em ${investment.name} realizado com sucesso!`);
            }, 1500);
        }

        function addNewInvestment() {
            const name = document.getElementById('newInvestmentName').value;
            const rate = parseFloat(document.getElementById('newInvestmentRate').value);
            const description = document.getElementById('newInvestmentDescription').value;
            const minAmount = parseFloat(document.getElementById('newInvestmentMinAmount').value);
            const btn = document.querySelector('#addInvestmentModal .btn');
            
            if (!name || !rate || !description || !minAmount) {
                showError('Por favor, preencha todos os campos!');
                return;
            }
            
            showLoading(btn);
            
            setTimeout(() => {
                // Gerar ID único
                const newId = Math.max(...investments.map(inv => inv.id), 0) + 1;
                
                const newInvestment = {
                    id: newId,
                    name,
                    rate,
                    description,
                    minAmount
                };
                
                investments.push(newInvestment);
                
                // 💾 SALVAR DADOS NO LOCALSTORAGE
                saveData();
                
                updateAdminDashboard();
                updateAvailableInvestments();
                hideLoading(btn);
                closeModal('addInvestmentModal');
                showSuccess('Investimento adicionado com sucesso!');
            }, 1000);
        }

        // Funções de Modal
        function openModal(modalId) {
            const modal = document.getElementById(modalId);
            modal.style.display = 'block';
            
            if (modalId === 'investModal') {
                // Redireciona para openInvestModal para garantir funcionamento correto
                openInvestModal();
                return;
            }
            
            if (modalId === 'depositModal') {
                const minAmountText = document.getElementById('depositMinAmount');
                minAmountText.textContent = `Valor mínimo: ${formatCurrency(platformSettings.minimumDeposit)}`;
            }
            
            if (modalId === 'withdrawModal') {
                const withdrawTitle = document.querySelector('#withdrawModal h3');
                if (platformSettings.withdrawalFee > 0) {
                    withdrawTitle.textContent = `💸 Fazer Saque PIX (Taxa: ${platformSettings.withdrawalFee}%)`;
                } else {
                    withdrawTitle.textContent = '💸 Fazer Saque PIX';
                }
                
                // Configurar campos do saque PIX
                setTimeout(() => {
                    updatePixKeyPlaceholder(); // Configurar placeholder e auto-preenchimento
                }, 100);
            }
        }

        function selectInvestmentCard(investmentId) {
            // Remove seleção anterior
            document.querySelectorAll('.investment-card-option').forEach(card => {
                card.classList.remove('selected');
            });
            
            // Adiciona seleção ao card clicado
            const selectedCard = document.querySelector(`[data-investment-id="${investmentId}"]`);
            if (selectedCard) {
                selectedCard.classList.add('selected');
            }
            
            // Busca o investimento
            const investment = investments.find(inv => inv.id === investmentId);
            
            if (investment) {
                const amountInput = document.getElementById('investAmount');
                amountInput.placeholder = `Mínimo: ${formatCurrency(investment.minAmount)}`;
                amountInput.min = investment.minAmount;
                amountInput.focus();
                
                // Armazena o ID selecionado usando o input hidden existente
                let selectedIdField = document.getElementById('selectedInvestmentId');
                if (!selectedIdField) {
                    // Cria o campo se não existir
                    selectedIdField = document.createElement('input');
                    selectedIdField.type = 'hidden';
                    selectedIdField.id = 'selectedInvestmentId';
                    document.querySelector('#investModal .modal-content').appendChild(selectedIdField);
                }
                selectedIdField.value = investmentId;
            }
        }

        function openInvestModal(investmentId = null) {
            if (investmentId) {
                // Investimento específico - abre modal direto
                openDirectInvestModal(investmentId);
            } else {
                // Verificar se há investimentos disponíveis
                if (investments.length === 0) {
                    showError('Nenhum investimento disponível no momento. Aguarde novos cadastros.');
                    return;
                }
                
                // Modal geral com cards de investimentos
                const modal = document.getElementById('investModal');
                modal.style.display = 'block';
                
                // Força mostrar a seção de cards
                const cardsSection = document.getElementById('investmentCardsSelection');
                const infoSection = document.getElementById('investmentInfo');
                
                cardsSection.style.display = 'block';
                infoSection.style.display = 'none';
                
                // Limpa qualquer seleção anterior
                const selectedIdField = document.getElementById('selectedInvestmentId');
                if (selectedIdField) {
                    selectedIdField.value = '';
                }
                
                // Reset do campo de valor
                const amountInput = document.getElementById('investAmount');
                amountInput.placeholder = '0,00';
                amountInput.min = '1';
                amountInput.value = '';
                
                // Cria os cards com investimentos cadastrados
                const container = document.getElementById('investmentCards');
                container.innerHTML = '';
                
                investments.forEach(investment => {
                    const cardDiv = document.createElement('div');
                    cardDiv.className = 'investment-card-option';
                    cardDiv.setAttribute('data-investment-id', investment.id);
                    cardDiv.onclick = () => selectInvestmentCard(investment.id);
                    
                    cardDiv.innerHTML = `
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                            <div style="font-weight: 700; color: var(--text-primary); font-size: 1.1rem;">${investment.name}</div>
                            <div style="color: var(--success); font-weight: 700; font-size: 1.1rem; text-shadow: 0 0 10px rgba(16, 185, 129, 0.3);">${investment.rate}% a.a.</div>
                        </div>
                        <div style="color: var(--text-secondary); font-size: 0.9rem;">${investment.description} - Mín: ${formatCurrency(investment.minAmount)}</div>
                    `;
                    
                    container.appendChild(cardDiv);
                });
            }
        }

        function openDirectInvestModal(investmentId) {
            // Busca o investimento específico
            const investment = investments.find(inv => inv.id === investmentId);
            
            if (!investment) {
                showError('Investimento não encontrado ou não disponível!');
                return;
            }
            
            const modal = document.getElementById('investModal');
            modal.style.display = 'block';
            
            // IMPORTANTE: Esconde a seleção de cards e mostra apenas o investimento específico
            document.getElementById('investmentCardsSelection').style.display = 'none';
            document.getElementById('investmentInfo').style.display = 'block';
            
            // Preenche as informações do investimento específico
            document.getElementById('selectedInvestmentName').textContent = investment.name;
            document.getElementById('selectedInvestmentRate').textContent = `${investment.rate}% a.a.`;
            document.getElementById('selectedInvestmentDesc').textContent = investment.description;
            document.getElementById('selectedInvestmentMin').textContent = formatCurrency(investment.minAmount);
            
            // Configura o campo de valor com o mínimo do investimento
            const amountInput = document.getElementById('investAmount');
            amountInput.placeholder = `Mínimo: ${formatCurrency(investment.minAmount)}`;
            amountInput.min = investment.minAmount;
            amountInput.value = '';
            amountInput.focus(); // Foca no campo para facilitar a digitação
            
            // Armazena o ID do investimento selecionado
            document.getElementById('selectedInvestmentId').value = investmentId;
            
            // Efeito visual de destaque
            setTimeout(() => {
                const infoDiv = document.getElementById('investmentInfo');
                infoDiv.style.boxShadow = '0 0 15px rgba(0, 212, 255, 0.5)';
                setTimeout(() => {
                    infoDiv.style.boxShadow = '';
                }, 1000);
            }, 100);
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
            
            const modal = document.getElementById(modalId);
            const inputs = modal.querySelectorAll('input');
            inputs.forEach(input => {
                if (input.type !== 'hidden') {
                    input.value = '';
                }
            });
            
            // Reset de selects também
            const selects = modal.querySelectorAll('select');
            selects.forEach(select => {
                select.selectedIndex = 0;
            });
            
            // Limpeza específica para modal de depósito PIX
            if (modalId === 'depositModal') {
                // Parar monitoramento PIX se ativo
                if (pixCheckInterval) {
                    clearInterval(pixCheckInterval);
                    pixCheckInterval = null;
                }
                if (pixTimeoutTimer) {
                    clearTimeout(pixTimeoutTimer);
                    pixTimeoutTimer = null;
                }
                
                // Reset da interface PIX
                document.getElementById('depositForm').style.display = 'block';
                document.getElementById('pixPayment').style.display = 'none';
                
                // Limpar QR Code
                const qrContainer = document.getElementById('qrcode');
                if (qrContainer) qrContainer.innerHTML = '';
                
                // Reset do código PIX
                const pixCodeField = document.getElementById('pixCode');
                if (pixCodeField) pixCodeField.value = '';
                
                // Reset do status
                const statusDiv = document.getElementById('paymentStatus');
                if (statusDiv) {
                    statusDiv.className = '';
                    statusDiv.innerHTML = `
                        <div style="color: var(--warning); font-weight: 600; margin-bottom: 8px;">
                            ⏳ Aguardando Pagamento...
                        </div>
                        <div style="color: var(--text-secondary); font-size: 0.9rem;">
                            Verificando pagamento automaticamente
                        </div>
                        <div style="margin-top: 12px;">
                            <div class="loading-spinner"></div>
                        </div>
                    `;
                }
                
                currentPixPayment = null;
            }
            
            // Reset específico para modal de saque
            if (modalId === 'withdrawModal') {
                // Reset do select de tipo de chave PIX para CPF (padrão)
                document.getElementById('pixKeyType').value = 'cpf';
                updatePixKeyPlaceholder();
            }
            
            // Reset específico para modal de investimento
            if (modalId === 'investModal') {
                // Mostra cards de seleção e esconde info específica
                document.getElementById('investmentCardsSelection').style.display = 'block';
                document.getElementById('investmentInfo').style.display = 'none';
                
                // Remove seleções dos cards
                document.querySelectorAll('.investment-card-option').forEach(card => {
                    card.classList.remove('selected');
                });
                
                // Reset do campo de valor
                const amountInput = document.getElementById('investAmount');
                amountInput.placeholder = '0,00';
                amountInput.min = '1';
                
                // Reset do ID selecionado
                const selectedIdField = document.getElementById('selectedInvestmentId');
                if (selectedIdField) {
                    selectedIdField.value = '';
                }
            }
        }

        // Funções de Abas 
        function showTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.querySelectorAll('.nav-tab').forEach(btn => {
                btn.classList.remove('active');
            });
            
            document.getElementById(tabId).classList.add('active');
            event.target.classList.add('active');
            
            if (tabId === 'settingsTab') {
                setTimeout(() => {
                    loadPlatformSettings();
                }, 100);
            }
        }

        // Funções de Configuração
        function updatePlatformSettings() {
            const name = document.getElementById('platformName').value;
            const subtitle = document.getElementById('platformSubtitle').value;
            const primaryColor = document.getElementById('primaryColor').value;
            const secondaryColor = document.getElementById('secondaryColor').value;
            const btn = event.target;
            
            if (!name || !subtitle) {
                showError('Por favor, preencha o nome e subtítulo da plataforma!');
                return;
            }
            
            showLoading(btn);
            
            setTimeout(() => {
                platformSettings.name = name;
                platformSettings.subtitle = subtitle;
                platformSettings.primaryColor = primaryColor;
                platformSettings.secondaryColor = secondaryColor;
                
                // 💾 SALVAR DADOS NO LOCALSTORAGE
                saveData();
                
                applyPlatformTheme();
                hideLoading(btn);
                showSuccess('Configurações atualizadas com sucesso!');
            }, 1000);
        }

        function updateSystemSettings() {
            const minimumDeposit = parseFloat(document.getElementById('minimumDeposit').value);
            const withdrawalFee = parseFloat(document.getElementById('withdrawalFee').value);
            const maintenanceMode = document.getElementById('maintenanceMode').value === 'true';
            const btn = event.target;
            
            if (isNaN(minimumDeposit) || isNaN(withdrawalFee)) {
                showError('Por favor, insira valores válidos!');
                return;
            }
            
            showLoading(btn);
            
            setTimeout(() => {
                platformSettings.minimumDeposit = minimumDeposit;
                platformSettings.withdrawalFee = withdrawalFee;
                platformSettings.maintenanceMode = maintenanceMode;
                
                // 💾 SALVAR DADOS NO LOCALSTORAGE
                saveData();
                
                hideLoading(btn);
                showSuccess('Configurações do sistema atualizadas!');
            }, 1000);
        }

        function applyPlatformTheme() {
            // Atualizar textos
            document.querySelectorAll('.logo h1').forEach(el => {
                el.textContent = platformSettings.name;
            });
            
            document.querySelectorAll('.logo p').forEach(el => {
                el.textContent = platformSettings.subtitle;
            });
            
            // Atualizar cores CSS
            const root = document.documentElement;
            root.style.setProperty('--primary-color', platformSettings.primaryColor);
            root.style.setProperty('--secondary-color', platformSettings.secondaryColor);
        }

        function loadPlatformSettings() {
            const platformNameEl = document.getElementById('platformName');
            if (platformNameEl) {
                platformNameEl.value = platformSettings.name;
                document.getElementById('platformSubtitle').value = platformSettings.subtitle;
                document.getElementById('primaryColor').value = platformSettings.primaryColor;
                document.getElementById('secondaryColor').value = platformSettings.secondaryColor;
                document.getElementById('minimumDeposit').value = platformSettings.minimumDeposit;
                document.getElementById('withdrawalFee').value = platformSettings.withdrawalFee;
                document.getElementById('maintenanceMode').value = platformSettings.maintenanceMode.toString();
            }
        }

        // Funções de Gerenciamento de Dados
        function exportData() {
            try {
                const data = {
                    users: users,
                    investments: investments,
                    userInvestments: userInvestments,
                    transactions: transactions,
                    platformSettings: platformSettings,
                    exportDate: new Date().toISOString()
                };
                
                const dataStr = JSON.stringify(data, null, 2);
                const dataBlob = new Blob([dataStr], {type: 'application/json'});
                
                const link = document.createElement('a');
                link.href = URL.createObjectURL(dataBlob);
                link.download = `centuria_backup_${new Date().toISOString().split('T')[0]}.json`;
                link.click();
                
                showSuccess('Dados exportados com sucesso!');
            } catch (error) {
                console.error('Erro ao exportar dados:', error);
                showError('Erro ao exportar dados!');
            }
        }

        function resetAllData() {
            if (confirm('⚠️ ATENÇÃO: Isso vai apagar TODOS os dados (usuários, investimentos, transações). Tem certeza?')) {
                if (confirm('🚨 ÚLTIMA CONFIRMAÇÃO: Esta ação é IRREVERSÍVEL! Continuar?')) {
                    try {
                        localStorage.removeItem('centuria_data');
                        
                        // Reset dos arrays
                        users = getDefaultUsers();
                        investments = [];
                        userInvestments = [];
                        transactions = getDefaultTransactions();
                        platformSettings = {
                            name: "Centúria",
                            subtitle: "Sua plataforma de investimentos inteligente",
                            primaryColor: "#00d4ff",
                            secondaryColor: "#7c3aed",
                            minimumDeposit: 10,
                            withdrawalFee: 0,
                            maintenanceMode: false
                        };
                        
                        // Salvar estado limpo
                        saveData();
                        
                        // Fazer logout e atualizar interface
                        currentUser = null;
                        document.getElementById('authScreen').style.display = 'flex';
                        document.getElementById('userDashboard').style.display = 'none';
                        document.getElementById('adminDashboard').style.display = 'none';
                        
                        applyPlatformTheme();
                        loadPlatformSettings();
                        showLogin();
                        
                        showSuccess('✅ Todos os dados foram limpos! Sistema reiniciado.');
                        
                    } catch (error) {
                        console.error('Erro ao limpar dados:', error);
                        showError('Erro ao limpar dados!');
                    }
                }
            }
        }

        // Funções de Gerenciamento
        function editUser(userId) {
            const user = users.find(u => u.id === userId);
            if (!user) {
                showError('Usuário não encontrado!');
                return;
            }
            
            document.getElementById('editUserId').value = user.id;
            document.getElementById('editUserName').value = user.name;
            document.getElementById('editUserEmail').value = user.email;
            document.getElementById('editUserCPF').value = user.cpf;
            document.getElementById('editUserPixKey').value = user.pixKey || '';
            document.getElementById('editUserBalance').value = user.balance;
            document.getElementById('editUserPassword').value = '';
            
            openModal('editUserModal');
        }

        function saveUserEdit() {
            const userId = parseInt(document.getElementById('editUserId').value);
            const name = document.getElementById('editUserName').value;
            const email = document.getElementById('editUserEmail').value;
            const cpf = document.getElementById('editUserCPF').value;
            const pixKey = document.getElementById('editUserPixKey').value.trim();
            const balance = parseFloat(document.getElementById('editUserBalance').value);
            const newPassword = document.getElementById('editUserPassword').value;
            const btn = event.target;
            
            if (!name || !email || !cpf || isNaN(balance)) {
                showError('Por favor, preencha todos os campos obrigatórios!');
                return;
            }
            
            const existingUser = users.find(u => u.email === email && u.id !== userId);
            if (existingUser) {
                showError('Este email já está sendo usado por outro usuário!');
                return;
            }
            
            showLoading(btn);
            
            setTimeout(() => {
                const userIndex = users.findIndex(u => u.id === userId);
                if (userIndex !== -1) {
                    const originalBalance = users[userIndex].balance;
                    
                    users[userIndex].name = name;
                    users[userIndex].email = email;
                    users[userIndex].cpf = cpf;
                    users[userIndex].pixKey = pixKey || null;
                    users[userIndex].balance = balance;
                    
                    if (newPassword && newPassword.length >= 6) {
                        users[userIndex].password = newPassword;
                    } else if (newPassword && newPassword.length < 6) {
                        hideLoading(btn);
                        showError('Se desejar alterar a senha, ela deve ter pelo menos 6 caracteres!');
                        return;
                    }
                    
                    if (balance !== originalBalance) {
                        const newTransactionId = Math.max(...transactions.map(t => t.id), 0) + 1;
                        const transaction = {
                            id: newTransactionId,
                            userId: userId,
                            type: 'Ajuste de Saldo (Admin)',
                            amount: balance - originalBalance,
                            method: 'Ajuste Administrativo',
                            date: new Date()
                        };
                        transactions.push(transaction);
                    }
                    
                    // 💾 SALVAR DADOS NO LOCALSTORAGE
                    saveData();
                    
                    updateAdminDashboard();
                    hideLoading(btn);
                    closeModal('editUserModal');
                    showSuccess('Usuário atualizado com sucesso!');
                }
            }, 1000);
        }

        function deleteUser(userId) {
            if (confirm('Tem certeza que deseja excluir este usuário?')) {
                users = users.filter(u => u.id !== userId);
                userInvestments = userInvestments.filter(inv => inv.userId !== userId);
                transactions = transactions.filter(t => t.userId !== userId);
                
                // 💾 SALVAR DADOS NO LOCALSTORAGE
                saveData();
                
                updateAdminDashboard();
                showSuccess('Usuário excluído com sucesso!');
            }
        }

        function editInvestment(investmentId) {
            showError('Funcionalidade de edição será implementada em breve!');
        }

        function deleteInvestment(investmentId) {
            if (confirm('Tem certeza que deseja excluir este investimento?')) {
                investments = investments.filter(inv => inv.id !== investmentId);
                
                // 💾 SALVAR DADOS NO LOCALSTORAGE
                saveData();
                
                updateAdminDashboard();
                updateAvailableInvestments();
                showSuccess('Investimento excluído com sucesso!');
            }
        }

        // Funções Auxiliares
        function formatCurrency(value) {
            // Garantir que value é um número válido
            const numValue = parseFloat(value) || 0;
            return new Intl.NumberFormat('pt-BR', {
                style: 'currency',
                currency: 'BRL'
            }).format(numValue);
        }

        function formatLargeNumber(value, isCurrency = false) {
            if (value === 0) return isCurrency ? 'R$ 0' : '0';
            
            const absValue = Math.abs(value);
            let formattedValue;
            let suffix = '';
            
            if (absValue >= 1000000000) {
                // Bilhões
                formattedValue = (value / 1000000000).toFixed(1);
                suffix = 'B';
            } else if (absValue >= 1000000) {
                // Milhões
                formattedValue = (value / 1000000).toFixed(1);
                suffix = 'M';
            } else if (absValue >= 10000) {
                // Milhares (apenas para valores acima de 10K para evitar K desnecessário)
                formattedValue = (value / 1000).toFixed(1);
                suffix = 'K';
            } else if (absValue >= 1000 && isCurrency) {
                // Para valores entre 1K e 10K, usar formato abreviado apenas em currency para economizar espaço
                formattedValue = (value / 1000).toFixed(1);
                suffix = 'K';
            } else {
                // Valores menores - formato normal, mas limitado para currency
                if (isCurrency && absValue >= 1000) {
                    // Para evitar overflow em valores como R$ 9.999,00
                    return `R$ ${(value/1000).toFixed(1)}K`;
                } else if (isCurrency) {
                    return formatCurrency(value);
                } else {
                    return value.toString();
                }
            }
            
            // Remove .0 desnecessário
            formattedValue = formattedValue.replace('.0', '');
            
            if (isCurrency) {
                return `R$ ${formattedValue}${suffix}`;
            } else {
                return `${formattedValue}${suffix}`;
            }
        }

        function getNumberSizeClass(value, isCurrency = false) {
            const text = isCurrency ? formatLargeNumber(value, true) : formatLargeNumber(value, false);
            const length = text.length;
            
            if (length <= 8) return '';
            if (length <= 10) return 'large-number';
            if (length <= 12) return 'extra-large-number';
            return 'huge-number';
        }

        function formatDate(date) {
            return new Date(date).toLocaleDateString('pt-BR');
        }

        // Event Listeners
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.style.display = 'none';
            }
        }

        // Inicialização
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🚀 Iniciando Centúria...');
            
            // 📊 CARREGAR DADOS DO LOCALSTORAGE
            loadData();
            
            applyPlatformTheme();
            loadPlatformSettings();
            
            // Adicionar eventos de teclado para melhor UX
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    document.querySelectorAll('.modal').forEach(modal => {
                        if (modal.style.display === 'block') {
                            modal.style.display = 'none';
                        }
                    });
                }
            });
            
            // 🔄 SINCRONIZAÇÃO ENTRE ABAS/JANELAS
            // Detecta mudanças no localStorage de outras abas
            window.addEventListener('storage', function(e) {
                if (e.key === 'centuria_data') {
                    console.log('🔄 Dados atualizados em outra aba, sincronizando...');
                    syncData();
                }
            });
            
            // Auto-salvar dados a cada 30 segundos (backup)
            setInterval(() => {
                if (currentUser) {
                    saveData();
                    console.log('💾 Auto-backup dos dados realizado');
                }
            }, 30000);
            
            console.log('✅ Centúria iniciado com sucesso!');
            console.log(`👥 ${users.length} usuários carregados`);
            console.log(`📈 ${investments.length} investimentos disponíveis`);
        });
    </script>

<!-- Firebase SDKs -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-app.js";

  const firebaseConfig = {
    apiKey: "AIzaSyDAljrYJVP5krCy3Uai6LI70rE3Lzm4rps",
    authDomain: "centuria-v1.firebaseapp.com",
    projectId: "centuria-v1",
    storageBucket: "centuria-v1.firebasestorage.app",
    messagingSenderId: "414206835207",
    appId: "1:414206835207:web:c9e4e43a27eda8d59788a2"
  };

  const app = initializeApp(firebaseConfig);
</script>

</body>
</html>
