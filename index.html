<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DividendOS - Gestão de Dividendos</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
        }

        .gradient-text {
            background: linear-gradient(to right, #60a5fa, #a78bfa, #f472b6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .card-hover:hover {
            transform: scale(1.02);
        }

        .btn-hover:hover {
            transform: scale(1.05);
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .animate-spin {
            animation: spin 1s linear infinite;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-gray-950 via-gray-900 to-gray-950 text-gray-100 min-h-screen">
    
    <!-- Header -->
    <div class="relative overflow-hidden">
        <div class="absolute inset-0 bg-gradient-to-r from-blue-600/20 via-purple-600/20 to-pink-600/20"></div>
        <div class="absolute inset-0 backdrop-blur-3xl"></div>
        
        <div class="relative max-w-7xl mx-auto px-8 py-12">
            <div class="flex items-center justify-between flex-wrap gap-4">
                <div class="flex items-center gap-4">
                    <div class="relative">
                        <div class="absolute inset-0 bg-gradient-to-r from-blue-500 to-purple-500 rounded-2xl blur-xl opacity-50"></div>
                        <div class="relative bg-gradient-to-r from-blue-500 to-purple-500 p-4 rounded-2xl">
                            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white">
                                <polyline points="22 7 13.5 15.5 8.5 10.5 2 17"></polyline>
                                <polyline points="16 7 22 7 22 13"></polyline>
                            </svg>
                        </div>
                    </div>
                    <div>
                        <h1 class="text-4xl font-bold gradient-text">DividendOS</h1>
                        <p class="text-gray-400 text-sm mt-1">Gestão inteligente de proventos</p>
                    </div>
                </div>

                <button onclick="openModal()" class="group relative overflow-hidden bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 px-8 py-4 rounded-2xl font-semibold transition-all duration-300 shadow-lg hover:shadow-green-500/50 btn-hover">
                    <div class="flex items-center gap-3">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <line x1="12" y1="5" x2="12" y2="19"></line>
                            <line x1="5" y1="12" x2="19" y2="12"></line>
                        </svg>
                        <span>Adicionar Ativo</span>
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"></path>
                        </svg>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Dashboard Cards -->
    <div class="max-w-7xl mx-auto px-8 -mt-4">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
            <!-- Card 1 -->
            <div class="group relative overflow-hidden bg-gradient-to-br from-gray-800/50 to-gray-900/50 backdrop-blur-xl p-8 rounded-3xl border border-gray-700/50 hover:border-green-500/50 transition-all duration-300 card-hover">
                <div class="absolute inset-0 bg-gradient-to-br from-green-500/10 to-emerald-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                <div class="relative">
                    <div class="flex items-center justify-between mb-4">
                        <span class="text-gray-400 text-sm font-medium uppercase tracking-wider">Total a Receber</span>
                        <div class="p-3 bg-green-500/20 rounded-xl group-hover:scale-110 transition-transform duration-300">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-green-400">
                                <line x1="12" y1="1" x2="12" y2="23"></line>
                                <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                            </svg>
                        </div>
                    </div>
                    <div id="totalReceive" class="text-4xl font-bold bg-gradient-to-r from-green-400 to-emerald-400 bg-clip-text text-transparent mb-2" style="-webkit-background-clip: text; -webkit-text-fill-color: transparent;">R$ 0,00</div>
                    <div class="text-sm text-gray-500">Próximos pagamentos agendados</div>
                </div>
            </div>

            <!-- Card 2 -->
            <div class="group relative overflow-hidden bg-gradient-to-br from-gray-800/50 to-gray-900/50 backdrop-blur-xl p-8 rounded-3xl border border-gray-700/50 hover:border-blue-500/50 transition-all duration-300 card-hover">
                <div class="absolute inset-0 bg-gradient-to-br from-blue-500/10 to-purple-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                <div class="relative">
                    <div class="flex items-center justify-between mb-4">
                        <span class="text-gray-400 text-sm font-medium uppercase tracking-wider">Yield Médio</span>
                        <div class="p-3 bg-blue-500/20 rounded-xl group-hover:scale-110 transition-transform duration-300">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-blue-400">
                                <path d="M21.21 15.89A10 10 0 1 1 8 2.83"></path>
                                <path d="M22 12A10 10 0 0 0 12 2v10z"></path>
                            </svg>
                        </div>
                    </div>
                    <div id="avgYield" class="text-4xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent mb-2" style="-webkit-background-clip: text; -webkit-text-fill-color: transparent;">0.00%</div>
                    <div class="text-sm text-gray-500">Rentabilidade da sua carteira</div>
                </div>
            </div>

            <!-- Card 3 -->
            <div class="group relative overflow-hidden bg-gradient-to-br from-gray-800/50 to-gray-900/50 backdrop-blur-xl p-8 rounded-3xl border border-gray-700/50 hover:border-purple-500/50 transition-all duration-300 card-hover">
                <div class="absolute inset-0 bg-gradient-to-br from-purple-500/10 to-pink-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                <div class="relative">
                    <div class="flex items-center justify-between mb-4">
                        <span class="text-gray-400 text-sm font-medium uppercase tracking-wider">Pagamentos</span>
                        <div class="p-3 bg-purple-500/20 rounded-xl group-hover:scale-110 transition-transform duration-300">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-purple-400">
                                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                                <line x1="16" y1="2" x2="16" y2="6"></line>
                                <line x1="8" y1="2" x2="8" y2="6"></line>
                                <line x1="3" y1="10" x2="21" y2="10"></line>
                            </svg>
                        </div>
                    </div>
                    <div id="upcomingCount" class="text-4xl font-bold bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent mb-2" style="-webkit-background-clip: text; -webkit-text-fill-color: transparent;">0</div>
                    <div class="text-sm text-gray-500">Ativos com proventos ativos</div>
                </div>
            </div>
        </div>

        <!-- Filtros -->
        <div id="filtersSection" class="bg-gray-800/30 backdrop-blur-xl rounded-3xl p-8 mb-8 border border-gray-700/50" style="display: none;">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="relative group">
                    <div class="absolute inset-0 bg-gradient-to-r from-blue-500/20 to-purple-500/20 rounded-2xl opacity-0 group-focus-within:opacity-100 transition-opacity duration-300 blur-xl"></div>
                    <div class="relative">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400">
                            <circle cx="11" cy="11" r="8"></circle>
                            <path d="m21 21-4.35-4.35"></path>
                        </svg>
                        <input type="text" id="searchInput" placeholder="Buscar por ticker ou nome..." class="w-full pl-12 pr-4 py-4 bg-gray-800/50 border border-gray-700 rounded-2xl focus:outline-none focus:border-blue-500/50 text-white placeholder-gray-500 transition-all duration-300" oninput="filterAssets()">
                    </div>
                </div>

                <div class="relative group">
                    <div class="absolute inset-0 bg-gradient-to-r from-purple-500/20 to-pink-500/20 rounded-2xl opacity-0 group-focus-within:opacity-100 transition-opacity duration-300 blur-xl"></div>
                    <div class="relative">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400">
                            <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon>
                        </svg>
                        <select id="filterType" class="w-full pl-12 pr-4 py-4 bg-gray-800/50 border border-gray-700 rounded-2xl focus:outline-none focus:border-purple-500/50 text-white appearance-none cursor-pointer transition-all duration-300" onchange="filterAssets()">
                            <option value="all">Todos os tipos</option>
                            <option value="Ação">Ações</option>
                            <option value="FII">FIIs</option>
                        </select>
                    </div>
                </div>

                <div class="relative group">
                    <div class="absolute inset-0 bg-gradient-to-r from-green-500/20 to-emerald-500/20 rounded-2xl opacity-0 group-focus-within:opacity-100 transition-opacity duration-300 blur-xl"></div>
                    <div class="relative">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400">
                            <path d="m21 16-4 4-4-4"></path>
                            <path d="M17 20V4"></path>
                            <path d="m3 8 4-4 4 4"></path>
                            <path d="M7 4v16"></path>
                        </svg>
                        <select id="sortBy" class="w-full pl-12 pr-4 py-4 bg-gray-800/50 border border-gray-700 rounded-2xl focus:outline-none focus:border-green-500/50 text-white appearance-none cursor-pointer transition-all duration-300" onchange="filterAssets()">
                            <option value="date">Ordenar por Data</option>
                            <option value="ticker">Ordenar por Ticker</option>
                            <option value="yield">Ordenar por Yield</option>
                            <option value="value">Ordenar por Valor</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tabela -->
        <div id="tableSection" class="bg-gray-800/30 backdrop-blur-xl rounded-3xl shadow-2xl overflow-hidden mb-8 border border-gray-700/50" style="display: none;">
            <div class="overflow-x-auto">
                <table class="w-full">
                    <thead>
                        <tr class="bg-gradient-to-r from-gray-800/80 to-gray-900/80 border-b border-gray-700/50">
                            <th class="px-6 py-5 text-left text-xs font-bold text-gray-400 uppercase tracking-wider">Ticker</th>
                            <th class="px-6 py-5 text-left text-xs font-bold text-gray-400 uppercase tracking-wider">Nome</th>
                            <th class="px-6 py-5 text-left text-xs font-bold text-gray-400 uppercase tracking-wider">Tipo</th>
                            <th class="px-6 py-5 text-right text-xs font-bold text-gray-400 uppercase tracking-wider">Qtd</th>
                            <th class="px-6 py-5 text-right text-xs font-bold text-gray-400 uppercase tracking-wider">Dividendo</th>
                            <th class="px-6 py-5 text-right text-xs font-bold text-gray-400 uppercase tracking-wider">Total</th>
                            <th class="px-6 py-5 text-left text-xs font-bold text-gray-400 uppercase tracking-wider">Pagamento</th>
                            <th class="px-6 py-5 text-center text-xs font-bold text-gray-400 uppercase tracking-wider">Status</th>
                            <th class="px-6 py-5 text-center text-xs font-bold text-gray-400 uppercase tracking-wider">Ações</th>
                        </tr>
                    </thead>
                    <tbody id="assetsTable"></tbody>
                </table>
            </div>
        </div>

        <!-- Empty State -->
        <div id="emptyState" class="relative overflow-hidden bg-gradient-to-br from-gray-800/30 to-gray-900/30 backdrop-blur-xl rounded-3xl p-16 text-center mb-8 border border-gray-700/50">
            <div class="absolute inset-0 bg-gradient-to-r from-blue-500/5 via-purple-500/5 to-pink-500/5"></div>
            <div class="relative">
                <div class="inline-block p-6 bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-3xl mb-6">
                    <svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-600">
                        <polyline points="22 7 13.5 15.5 8.5 10.5 2 17"></polyline>
                        <polyline points="16 7 22 7 22 13"></polyline>
                    </svg>
                </div>
                <h3 class="text-2xl font-bold mb-3 gradient-text">Sua carteira está vazia</h3>
                <p class="text-gray-500 mb-8 max-w-md mx-auto">Comece adicionando seus primeiros ativos para acompanhar dividendos e construir seu patrimônio</p>
                <button onclick="openModal()" class="group relative overflow-hidden bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 px-10 py-5 rounded-2xl font-bold inline-flex items-center gap-3 transition-all duration-300 shadow-lg hover:shadow-purple-500/50 btn-hover">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="12" y1="5" x2="12" y2="19"></line>
                        <line x1="5" y1="12" x2="19" y2="12"></line>
                    </svg>
                    <span>Adicionar Primeiro Ativo</span>
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"></path>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Footer -->
        <div class="text-center pb-8 text-gray-600 text-sm">
            <p class="flex items-center justify-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"></path>
                </svg>
                Powered by brapi.dev API • Cotações em tempo real
            </p>
        </div>
    </div>

    <!-- Modal -->
    <div id="modal" class="fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-50" style="display: none;">
        <div class="relative bg-gradient-to-br from-gray-800 to-gray-900 rounded-3xl p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto border border-gray-700/50 shadow-2xl">
            <div class="absolute inset-0 bg-gradient-to-br from-blue-500/5 via-purple-500/5 to-pink-500/5 rounded-3xl"></div>
            
            <div class="relative">
                <div class="flex justify-between items-center mb-8">
                    <div>
                        <h2 class="text-3xl font-bold gradient-text">Adicionar Ativo</h2>
                        <p class="text-gray-500 text-sm mt-1">Busque e adicione ativos à sua carteira</p>
                    </div>
                    <button onclick="closeModal()" class="p-3 text-gray-400 hover:text-white hover:bg-gray-700/50 rounded-xl transition-all duration-200">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <line x1="18" y1="6" x2="6" y2="18"></line>
                            <line x1="6" y1="6" x2="18" y2="18"></line>
                        </svg>
                    </button>
                </div>

                <div class="space-y-6">
                    <div>
                        <label class="block text-sm font-bold mb-3 text-gray-300 uppercase tracking-wider">Buscar Ticker</label>
                        <div class="flex gap-3">
                            <input type="text" id="searchTicker" placeholder="Ex: PETR4, VALE3, MXRF11..." class="flex-1 px-5 py-4 bg-gray-800/50 border border-gray-700 rounded-2xl focus:outline-none focus:border-blue-500/50 text-white placeholder-gray-500 transition-all duration-300" onkeypress="if(event.key==='Enter') searchTicker()">
                            <button onclick="searchTicker()" class="bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 px-8 py-4 rounded-2xl font-bold flex items-center gap-3 transition-all duration-300 shadow-lg hover:shadow-blue-500/50">
                                <svg id="searchIcon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <circle cx="11" cy="11" r="8"></circle>
                                    <path d="m21 21-4.35-4.35"></path>
                                </svg>
                                Buscar
                            </button>
                        </div>
                    </div>

                    <div id="searchResults"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let myAssets = [];

        function openModal() {
            document.getElementById('modal').style.display = 'flex';
            document.getElementById('searchTicker').value = '';
            document.getElementById('searchResults').innerHTML = '';
        }

        function closeModal() {
            document.getElementById('modal').style.display = 'none';
        }

        async function searchTicker() {
            const ticker = document.getElementById('searchTicker').value.toUpperCase();
            if (!ticker || ticker.length < 4) {
                alert('Digite um ticker válido');
                return;
            }

            const searchIcon = document.getElementById('searchIcon');
            searchIcon.classList.add('animate-spin');

            try {
                const response = await fetch(`https://brapi.dev/api/quote/${ticker}?token=demo`);
                const data = await response.json();

                if (data.results && data.results.length > 0) {
                    const stock = data.results[0];
                    displaySearchResult({
                        ticker: stock.symbol,
                        name: stock.longName || stock.shortName,
                        type: stock.symbol.includes('11') || stock.symbol.includes('FII') ? 'FII' : 'Ação',
                        sector: stock.sector || 'Não informado',
                        currentPrice: stock.regularMarketPrice || 0
                    });
                } else {
                    alert('Ticker não encontrado');
                }
            } catch (error) {
                console.error('Erro:', error);
                alert('Erro ao buscar ticker. Tente novamente.');
            }

            searchIcon.classList.remove('animate-spin');
        }

        function displaySearchResult(result) {
            const typeClass = result.type === 'FII' 
                ? 'bg-gradient-to-r from-purple-500/20 to-pink-500/20 text-purple-300 border border-purple-500/30'
                : 'bg-gradient-to-r from-blue-500/20 to-cyan-500/20 text-blue-300 border border-blue-500/30';

            document.getElementById('searchResults').innerHTML = `
                <div class="bg-gradient-to-br from-gray-800/50 to-gray-900/50 p-8 rounded-3xl border border-gray-700/50">
                    <div class="flex justify-between items-start mb-6">
                        <div>
                            <h3 class="text-2xl font-bold gradient-text">${result.ticker}</h3>
                            <p class="text-gray-300 text-lg mt-1">${result.name}</p>
                            <p class="text-sm text-gray-500 mt-2">${result.sector}</p>
                        </div>
                        <span class="px-4 py-2 rounded-xl text-xs font-bold ${typeClass}">${result.type}</span>
                    </div>

                    <div class="mb-6">
                        <p class="text-sm text-gray-500 mb-2">Cotação atual</p>
                        <p class="text-3xl font-bold text-green-400">R$ ${result.currentPrice.toFixed(2)}</p>
                    </div>

                    <div class="mb-6">
                        <label class="block text-sm font-bold mb-3 text-gray-300 uppercase tracking-wider">Quantidade de cotas/ações</label>
                        <input type="number" id="sharesInput" placeholder="Ex: 100" class="w-full px-5 py-4 bg-gray-800/50 border border-gray-700 rounded-2xl focus:outline-none focus:border-green-500/50 text-white placeholder-gray-500 transition-all duration-300">
                    </div>

                    <button onclick='addAsset(${JSON.stringify(result)})' class="w-full bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 px-8 py-5 rounded-2xl font-bold flex items-center justify-center gap-3 transition-all duration-300 shadow-lg hover:shadow-green-500/50 btn-hover">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <line x1="12" y1="5" x2="12" y2="19"></line>
                            <line x1="5" y1="12" x2="19" y2="12"></line>
                        </svg>
                        Adicionar à Carteira
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M12 2L15.09 8.26L22 9
